{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps, FirebaseApp } from 'firebase/app';\r\nimport { getAuth, Auth, GoogleAuthProvider } from 'firebase/auth';\r\nimport { getFirestore, Firestore } from 'firebase/firestore';\r\nimport { getMessaging, Messaging } from 'firebase/messaging';\r\n\r\nconst firebaseConfig = {\r\n    apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY?.trim(),\r\n    authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN?.trim(),\r\n    projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID?.trim(),\r\n    storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET?.trim(),\r\n    messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID?.trim(),\r\n    appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID?.trim()\r\n};\r\n\r\n// Check if we have the minimum required config\r\nconst hasValidConfig = !!(firebaseConfig.apiKey && firebaseConfig.projectId);\r\n\r\n// Initialize Firebase only if we have valid config and it hasn't been initialized\r\nlet app: FirebaseApp | null = null;\r\nlet auth: Auth | null = null;\r\nlet db: Firestore | null = null;\r\nlet messaging: Messaging | null = null;\r\nconst googleProvider = new GoogleAuthProvider();\r\n\r\nif (hasValidConfig) {\r\n    app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0];\r\n    auth = getAuth(app);\r\n    db = getFirestore(app);\r\n\r\n    // Initialize Messaging only on client-side\r\n    if (typeof window !== 'undefined') {\r\n        try {\r\n            messaging = getMessaging(app);\r\n            console.log('[Firebase] Messaging initialized');\r\n        } catch (msgErr) {\r\n            console.warn('[Firebase] Messaging failed to initialize (likely due to Service Worker issues or incompatible browser):', msgErr);\r\n        }\r\n    }\r\n\r\n    console.log('[Firebase] Initialized successfully');\r\n} else {\r\n    console.warn('[Firebase] Not initialized - missing config');\r\n}\r\n\r\n// Debug logging AFTER initialization\r\nconst missingVars = Object.entries(firebaseConfig)\r\n    .filter(([_, value]) => !value)\r\n    .map(([key]) => key);\r\n\r\nconsole.log('[Firebase Diagnostic]', {\r\n    hasApp: !!app,\r\n    hasMessaging: !!messaging,\r\n    env: process.env.NODE_ENV,\r\n    config: {\r\n        apiKey: firebaseConfig.apiKey ? `${firebaseConfig.apiKey.substring(0, 5)}...${firebaseConfig.apiKey.substring(firebaseConfig.apiKey.length - 5)}` : 'MISSING',\r\n        projectId: firebaseConfig.projectId || 'MISSING',\r\n        authDomain: firebaseConfig.authDomain || 'MISSING'\r\n    },\r\n    missing: missingVars.length > 0 ? missingVars : 'NONE'\r\n});\r\n\r\nif (missingVars.length > 0) {\r\n    console.error('‚ùå CONFIGURACI√ìN DE FIREBASE INCOMPLETA. Revisa .env.local');\r\n}\r\n\r\nexport { auth, db, app, googleProvider, messaging };\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAMY;AANZ;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAEA,MAAM,iBAAiB;IACnB,qFAAkD;IAClD,4EAA0D;IAC1D,2DAAwD;IACxD,mFAAgE;IAChE,qEAAyE;IACzE,sFAAgD;AACpD;AAEA,+CAA+C;AAC/C,MAAM,iBAAiB,CAAC,CAAC,CAAC,eAAe,MAAM,IAAI,eAAe,SAAS;AAE3E,kFAAkF;AAClF,IAAI,MAA0B;AAC9B,IAAI,OAAoB;AACxB,IAAI,KAAuB;AAC3B,IAAI,YAA8B;AAClC,MAAM,iBAAiB,IAAI,0LAAkB;AAE7C,IAAI,gBAAgB;IAChB,MAAM,IAAA,qLAAO,IAAG,MAAM,KAAK,IAAI,IAAA,2LAAa,EAAC,kBAAkB,IAAA,qLAAO,GAAE,CAAC,EAAE;IAC3E,OAAO,IAAA,+KAAO,EAAC;IACf,KAAK,IAAA,yLAAY,EAAC;IAElB,2CAA2C;IAC3C,wCAAmC;QAC/B,IAAI;YACA,YAAY,IAAA,gMAAY,EAAC;YACzB,QAAQ,GAAG,CAAC;QAChB,EAAE,OAAO,QAAQ;YACb,QAAQ,IAAI,CAAC,4GAA4G;QAC7H;IACJ;IAEA,QAAQ,GAAG,CAAC;AAChB,OAAO;IACH,QAAQ,IAAI,CAAC;AACjB;AAEA,qCAAqC;AACrC,MAAM,cAAc,OAAO,OAAO,CAAC,gBAC9B,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,GAAK,CAAC,OACxB,GAAG,CAAC,CAAC,CAAC,IAAI,GAAK;AAEpB,QAAQ,GAAG,CAAC,yBAAyB;IACjC,QAAQ,CAAC,CAAC;IACV,cAAc,CAAC,CAAC;IAChB,GAAG;IACH,QAAQ;QACJ,QAAQ,eAAe,MAAM,GAAG,GAAG,eAAe,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,GAAG,EAAE,eAAe,MAAM,CAAC,SAAS,CAAC,eAAe,MAAM,CAAC,MAAM,GAAG,IAAI,GAAG;QACpJ,WAAW,eAAe,SAAS,IAAI;QACvC,YAAY,eAAe,UAAU,IAAI;IAC7C;IACA,SAAS,YAAY,MAAM,GAAG,IAAI,cAAc;AACpD;AAEA,IAAI,YAAY,MAAM,GAAG,GAAG;IACxB,QAAQ,KAAK,CAAC;AAClB"}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/lib/userService.ts"],"sourcesContent":["import { db } from './firebase';\r\nimport {\r\n    doc,\r\n    getDoc,\r\n    setDoc,\r\n    updateDoc,\r\n    arrayUnion,\r\n    arrayRemove,\r\n    serverTimestamp,\r\n    increment\r\n} from 'firebase/firestore';\r\n// Eliminamos la importaci√≥n del adminService para evitar crasheos en el navegador\r\n// import { logLimitAlert } from './adminService';\r\n\r\nconst ADMIN_EMAILS = [\r\n    'pickgenius@gmail.com',\r\n    'ingluisvasquez1311@gmail.com', // Explicit owner email\r\n    'luisvasquez1311@gmail.com'    // Admin whitelist\r\n];\r\n\r\nexport interface FavoritePlayer {\r\n    id: number | string;\r\n    name: string;\r\n    sport: 'basketball' | 'baseball' | 'nhl' | 'tennis' | 'football' | 'american-football' | string;\r\n    team?: string;\r\n}\r\n\r\nexport interface UserProfile {\r\n    uid: string;\r\n    email: string;\r\n    displayName?: string;\r\n    photoURL?: string;\r\n    isPremium: boolean;\r\n    subscriptionType?: 'trial' | 'paid' | 'admin';\r\n    subscriptionEnd?: Date;\r\n    lastActive?: Date;\r\n    predictionsUsed: number;\r\n    predictionsLimit: number;\r\n    totalPredictions: number;\r\n    favoriteTeams: string[];\r\n    favoritePlayers: FavoritePlayer[];\r\n    createdAt: Date;\r\n    lastLogin: Date;\r\n    role: 'admin' | 'user';\r\n    bio?: string;\r\n    phoneNumber?: string;\r\n    preferences?: {\r\n        notifications: boolean;\r\n        theme: 'dark' | 'light';\r\n        language: 'es' | 'en';\r\n        pushAlerts?: {\r\n            hotPicks: boolean;\r\n            matchResults: boolean;\r\n            valueHunter: boolean;\r\n            bankrollAlerts: boolean;\r\n            discord: boolean;\r\n            telegram: boolean;\r\n        };\r\n        discordId?: string;\r\n        telegramId?: string;\r\n    };\r\n    stats?: {\r\n        horarios: number;\r\n        resultados: number;\r\n        anotadores: number;\r\n        asistentes: number;\r\n        rank: number;\r\n        reputation: number;\r\n        streak: string;\r\n        longestStreak: string;\r\n        winRate: number;\r\n        vroi: number;\r\n    };\r\n}\r\n\r\nexport interface PredictionRecord {\r\n    id?: string;\r\n    uid: string;\r\n    // For Player Props\r\n    playerName?: string;\r\n    propType?: string;\r\n    line?: number;\r\n    prediction?: string;\r\n    probability?: number;\r\n\r\n    // For Match Predictions (AI Oracle)\r\n    gameId?: string;\r\n    sport: string;\r\n    homeTeam?: string;\r\n    awayTeam?: string;\r\n    winner?: string;\r\n    bettingTip?: string;\r\n    confidence: string | number;\r\n    reasoning: string;\r\n    predictions?: any; // Detailed stats (goals, corners, offsides)\r\n    keyFactors?: string[];\r\n\r\n    // Outcome tracking\r\n    status?: 'pending' | 'won' | 'lost' | 'void';\r\n    actualResult?: any;\r\n\r\n    timestamp: any;\r\n}\r\n\r\n/**\r\n * Create a new user profile in Firestore\r\n */\r\nexport async function createUserProfile(uid: string, email: string): Promise<UserProfile> {\r\n    if (!db) {\r\n        throw new Error('Firestore not initialized');\r\n    }\r\n\r\n    const userRef = doc(db, 'users', uid);\r\n\r\n    const newProfile: Omit<UserProfile, 'createdAt' | 'lastLogin'> & {\r\n        createdAt: any;\r\n        lastLogin: any;\r\n    } = {\r\n        uid,\r\n        email,\r\n        predictionsUsed: 0,\r\n        predictionsLimit: 3, // Reverts to 3 after trial expires\r\n        totalPredictions: 0,\r\n        favoriteTeams: [],\r\n        favoritePlayers: [],\r\n        createdAt: serverTimestamp(),\r\n        lastLogin: serverTimestamp(),\r\n        role: ADMIN_EMAILS.includes(email.toLowerCase()) ? 'admin' : 'user',\r\n        stats: {\r\n            horarios: 0,\r\n            resultados: 0,\r\n            anotadores: 0,\r\n            asistentes: 0,\r\n            rank: 0,\r\n            reputation: 0,\r\n            streak: '0w',\r\n            longestStreak: '0w',\r\n            winRate: 0,\r\n            vroi: 0\r\n        },\r\n        // GROWTH: 15-Day Free Trial for new users\r\n        subscriptionEnd: new Date(Date.now() + 15 * 24 * 60 * 60 * 1000),\r\n        isPremium: true, // Initially true for the trial\r\n        subscriptionType: 'trial'\r\n    };\r\n\r\n    await setDoc(userRef, newProfile);\r\n\r\n    return {\r\n        ...newProfile,\r\n        createdAt: new Date(),\r\n        lastLogin: new Date()\r\n    };\r\n}\r\n\r\n/**\r\n * Get user profile from Firestore\r\n */\r\nexport async function getUserProfile(uid: string): Promise<UserProfile | null> {\r\n    if (!db) return null;\r\n\r\n    const userRef = doc(db, 'users', uid);\r\n    const userSnap = await getDoc(userRef);\r\n\r\n    if (!userSnap.exists()) {\r\n        return null;\r\n    }\r\n\r\n    const data = userSnap.data();\r\n    let role = data.role || 'user';\r\n\r\n    // Update lastActive timestamp (non-blocking)\r\n    updateDoc(userRef, { lastActive: serverTimestamp() }).catch(() => null);\r\n\r\n    // Auto-promote if in whitelist but has user role\r\n    if (role !== 'admin' && ADMIN_EMAILS.includes(data.email?.toLowerCase())) {\r\n        role = 'admin';\r\n        // Force admin users to have premium access\r\n        updateDoc(userRef, {\r\n            role: 'admin',\r\n            isPremium: true,\r\n            subscriptionType: 'admin',\r\n            predictionsLimit: -1 // Unlimited\r\n        }).catch(console.error);\r\n    }\r\n\r\n    // Force premium status for all admins\r\n    const isAdmin = role === 'admin';\r\n\r\n    return {\r\n        uid: data.uid,\r\n        email: data.email,\r\n        // Admins are ALWAYS premium, no exceptions\r\n        isPremium: isAdmin || data.isPremium || (data.subscriptionEnd && data.subscriptionEnd.toDate() > new Date()),\r\n        subscriptionType: isAdmin ? 'admin' : (data.subscriptionType || (data.isPremium ? 'paid' : 'trial')),\r\n        subscriptionEnd: data.subscriptionEnd?.toDate(),\r\n        lastActive: data.lastActive?.toDate(),\r\n        predictionsUsed: data.predictionsUsed || 0,\r\n        predictionsLimit: isAdmin ? -1 : (data.predictionsLimit || 3), // Admins have unlimited\r\n        totalPredictions: data.totalPredictions || 0,\r\n        favoriteTeams: data.favoriteTeams || [],\r\n        favoritePlayers: data.favoritePlayers || [],\r\n        createdAt: data.createdAt?.toDate() || new Date(),\r\n        lastLogin: data.lastLogin?.toDate() || new Date(),\r\n        role: role,\r\n        stats: data.stats || {\r\n            horarios: 0,\r\n            resultados: 0,\r\n            anotadores: 0,\r\n            asistentes: 0,\r\n            rank: 0,\r\n            reputation: 0,\r\n            streak: '0w',\r\n            longestStreak: '0w',\r\n            winRate: 0,\r\n            vroi: 0\r\n        }\r\n    };\r\n}\r\n\r\n/**\r\n * Update user's last login timestamp\r\n */\r\nexport async function updateLastLogin(uid: string): Promise<void> {\r\n    if (!db) return;\r\n\r\n    const userRef = doc(db, 'users', uid);\r\n    await updateDoc(userRef, {\r\n        lastLogin: serverTimestamp()\r\n    });\r\n}\r\n\r\n/**\r\n * Add a team to user's favorites\r\n */\r\nexport async function addFavoriteTeam(uid: string, teamName: string): Promise<void> {\r\n    if (!db) return;\r\n\r\n    const userRef = doc(db, 'users', uid);\r\n    await updateDoc(userRef, {\r\n        favoriteTeams: arrayUnion(teamName)\r\n    });\r\n}\r\n\r\n/**\r\n * Remove a team from user's favorites\r\n */\r\nexport async function removeFavoriteTeam(uid: string, teamName: string): Promise<void> {\r\n    if (!db) return;\r\n\r\n    const userRef = doc(db, 'users', uid);\r\n    await updateDoc(userRef, {\r\n        favoriteTeams: arrayRemove(teamName)\r\n    });\r\n}\r\n\r\n/**\r\n * Add a player to user's favorites\r\n */\r\nexport async function addFavoritePlayer(uid: string, player: FavoritePlayer): Promise<void> {\r\n    if (!db) return;\r\n\r\n    const userRef = doc(db, 'users', uid);\r\n    await updateDoc(userRef, {\r\n        favoritePlayers: arrayUnion(player)\r\n    });\r\n}\r\n\r\n/**\r\n * Remove a player from user's favorites\r\n */\r\nexport async function removeFavoritePlayer(uid: string, player: FavoritePlayer): Promise<void> {\r\n    if (!db) return;\r\n\r\n    const userRef = doc(db, 'users', uid);\r\n    await updateDoc(userRef, {\r\n        favoritePlayers: arrayRemove(player)\r\n    });\r\n}\r\n\r\n/**\r\n * Increment predictions used counter\r\n */\r\nexport async function incrementPredictionsUsed(uid: string): Promise<void> {\r\n    if (!db) return;\r\n\r\n    const userRef = doc(db, 'users', uid);\r\n    const userSnap = await getDoc(userRef);\r\n\r\n    if (userSnap.exists()) {\r\n        await updateDoc(userRef, {\r\n            predictionsUsed: increment(1),\r\n            totalPredictions: increment(1)\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * Reset daily predictions counter (should be called by a scheduled function)\r\n */\r\nexport async function resetDailyPredictions(uid: string): Promise<void> {\r\n    if (!db) return;\r\n\r\n    const userRef = doc(db, 'users', uid);\r\n    await updateDoc(userRef, {\r\n        predictionsUsed: 0\r\n    });\r\n}\r\n\r\n/**\r\n * Upgrade user to premium\r\n */\r\nexport async function upgradeToPremium(uid: string, subscriptionEndDate: Date): Promise<void> {\r\n    if (!db) return;\r\n\r\n    const userRef = doc(db, 'users', uid);\r\n    await updateDoc(userRef, {\r\n        isPremium: true,\r\n        subscriptionEnd: subscriptionEndDate,\r\n        subscriptionType: 'paid',\r\n        predictionsLimit: -1 // -1 means unlimited\r\n    });\r\n}\r\n\r\n/**\r\n * Check if user can make a prediction\r\n */\r\nexport async function canMakePrediction(uid: string): Promise<{ canPredict: boolean; remaining: number }> {\r\n    const profile = await getUserProfile(uid);\r\n\r\n    if (!profile) {\r\n        return { canPredict: false, remaining: 0 };\r\n    }\r\n\r\n    // Premium users (including Trial) and Admins have unlimited predictions\r\n    // We double check the date here just in case\r\n    const isSubscriptionActive = profile.subscriptionEnd && profile.subscriptionEnd > new Date();\r\n\r\n    if (profile.isPremium || profile.role === 'admin' || isSubscriptionActive) {\r\n        return { canPredict: true, remaining: -1 };\r\n    }\r\n\r\n    // Free users have daily limit (Fix applied)\r\n    const remaining = profile.predictionsLimit - profile.predictionsUsed;\r\n\r\n    if (remaining <= 0) {\r\n        // Log removed to prevent client-side 'net' module errors\r\n        console.warn(`[Limit] Predictions limit reached for ${uid}`);\r\n        // logLimitAlert(uid, profile.email).catch(() => { });\r\n    }\r\n\r\n    return {\r\n        canPredict: remaining > 0,\r\n        remaining: Math.max(0, remaining)\r\n    };\r\n}\r\n\r\n/**\r\n * Get all users (Admin only)\r\n */\r\nimport { collection, getDocs, query, orderBy, limit } from 'firebase/firestore';\r\n\r\nexport async function getAllUsers(): Promise<UserProfile[]> {\r\n    if (!db) return [];\r\n\r\n    const usersRef = collection(db, 'users');\r\n    const q = query(usersRef, orderBy('createdAt', 'desc'), limit(50)); // Limit to last 50 for performance\r\n    const querySnapshot = await getDocs(q);\r\n\r\n    return querySnapshot.docs.map(doc => {\r\n        const data = doc.data();\r\n        const role = data.role || 'user';\r\n        return {\r\n            uid: data.uid,\r\n            email: data.email,\r\n            isPremium: data.isPremium || false,\r\n            subscriptionType: data.subscriptionType || (role === 'admin' ? 'admin' : (data.isPremium ? 'paid' : 'trial')),\r\n            subscriptionEnd: data.subscriptionEnd?.toDate(),\r\n            lastActive: data.lastActive?.toDate(),\r\n            predictionsUsed: data.predictionsUsed || 0,\r\n            predictionsLimit: data.predictionsLimit || 3,\r\n            totalPredictions: data.totalPredictions || 0,\r\n            favoriteTeams: data.favoriteTeams || [],\r\n            favoritePlayers: data.favoritePlayers || [],\r\n            createdAt: data.createdAt?.toDate() || new Date(),\r\n            lastLogin: data.lastLogin?.toDate() || new Date(),\r\n            role: data.role || 'user'\r\n        };\r\n    });\r\n}\r\n\r\n/**\r\n * Update user profile details\r\n */\r\nexport async function updateUserProfile(uid: string, updates: Partial<UserProfile>): Promise<void> {\r\n    if (!db) return;\r\n    const userRef = doc(db, 'users', uid);\r\n\r\n    // Convert Dates to Firestore timestamps if necessary\r\n    const cleanedUpdates: any = { ...updates };\r\n    if (updates.subscriptionEnd) cleanedUpdates.subscriptionEnd = updates.subscriptionEnd;\r\n\r\n    await updateDoc(userRef, cleanedUpdates);\r\n}\r\n\r\n/**\r\n * Set user role (Admin only)\r\n */\r\nexport async function setUserRole(uid: string, role: 'admin' | 'user'): Promise<void> {\r\n    if (!db) return;\r\n    const userRef = doc(db, 'users', uid);\r\n    await updateDoc(userRef, { role });\r\n}\r\n\r\n/**\r\n * Save an AI prediction to history\r\n */\r\nimport { addDoc } from 'firebase/firestore';\r\n\r\nexport async function savePrediction(uid: string, prediction: Omit<PredictionRecord, 'uid' | 'timestamp'>): Promise<void> {\r\n    if (!db) return;\r\n\r\n    const isGuest = !uid || uid === 'guest';\r\n    const finalUid = isGuest ? 'guest' : uid;\r\n\r\n    const predictionData = {\r\n        ...prediction,\r\n        uid: finalUid,\r\n        isGuest,\r\n        timestamp: serverTimestamp()\r\n    };\r\n\r\n    // 1. Save to main predictions collection (Structure compatible with rules: predictions/{uid}/history)\r\n    const predictionsRef = collection(db, 'predictions', finalUid, 'history');\r\n    await addDoc(predictionsRef, predictionData);\r\n\r\n    // 2. Save to global stats for Admin Live Feed\r\n    const statsRef = collection(db, 'stats_predictions');\r\n    await addDoc(statsRef, {\r\n        gameId: prediction.gameId || 'N/A',\r\n        pick: prediction.bettingTip || prediction.prediction || 'Consulta IA',\r\n        confidence: prediction.confidence || 0,\r\n        sport: prediction.sport || 'football',\r\n        isGuest,\r\n        userEmail: isGuest ? 'Invitado' : 'Usuario Registrado',\r\n        timestamp: serverTimestamp()\r\n    });\r\n\r\n    // 3. Update user stats ONLY if not a guest\r\n    if (!isGuest) {\r\n        const userRef = doc(db, 'users', uid);\r\n\r\n        // Determine target stat based on prediction type\r\n        let statToIncrement = 'stats.resultados'; // Default\r\n\r\n        if (prediction.playerName) {\r\n            // It's a player prop\r\n            if (prediction.propType?.toLowerCase().includes('assist') || prediction.prediction?.toLowerCase().includes('asist')) {\r\n                statToIncrement = 'stats.asistentes';\r\n            } else {\r\n                statToIncrement = 'stats.anotadores';\r\n            }\r\n        }\r\n\r\n        try {\r\n            await updateDoc(userRef, {\r\n                predictionsUsed: increment(1),\r\n                totalPredictions: increment(1),\r\n                [statToIncrement]: increment(1),\r\n                'stats.reputation': increment(15)\r\n            });\r\n        } catch (err) {\r\n            console.error('Error updating user stats (might be non-existent doc):', err);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Get user's prediction history\r\n */\r\nimport { where } from 'firebase/firestore';\r\n\r\nexport async function getUserPredictions(uid: string, limitCount: number = 20): Promise<PredictionRecord[]> {\r\n    if (!db) return [];\r\n\r\n    const predictionsRef = collection(db, 'predictions', uid, 'history');\r\n    const q = query(\r\n        predictionsRef,\r\n        orderBy('timestamp', 'desc'),\r\n        limit(limitCount)\r\n    );\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    return querySnapshot.docs.map(doc => ({\r\n        id: doc.id,\r\n        ...doc.data() as PredictionRecord,\r\n        timestamp: (doc.data() as any).timestamp?.toDate() || new Date()\r\n    }));\r\n}\r\n\r\n/**\r\n * Saves a generated parley prediction to user's history\r\n */\r\nexport async function saveParleyPrediction(uid: string, parleyData: any) {\r\n    if (!db) return;\r\n    const historyRef = collection(db, 'users', uid, 'parleyHistory');\r\n    return await addDoc(historyRef, {\r\n        ...parleyData,\r\n        createdAt: serverTimestamp()\r\n    });\r\n}\r\n/**\r\n * Recalcula estad√≠sticas reales del usuario basadas en su historial de predicciones\r\n */\r\nexport async function calculateUserStats(uid: string): Promise<UserProfile['stats'] | null> {\r\n    if (!db || !uid || uid === 'guest') return null;\r\n\r\n    try {\r\n        const predictionsRef = collection(db, 'predictions');\r\n        const q = query(predictionsRef, where('uid', '==', uid));\r\n        const querySnapshot = await getDocs(q);\r\n\r\n        let wins = 0;\r\n        let losses = 0;\r\n        let pushes = 0;\r\n        let totalValuable = 0;\r\n        let streak = 0;\r\n        let currentStreakType: 'w' | 'l' | null = null;\r\n        let bestStreak = 0;\r\n\r\n        // Sort by timestamp for streak calculation\r\n        const sortedDocs = querySnapshot.docs\r\n            .map(d => ({ ...d.data(), id: d.id }))\r\n            .sort((a: any, b: any) => (a.timestamp?.toMillis?.() || 0) - (b.timestamp?.toMillis?.() || 0));\r\n\r\n        for (const pred of sortedDocs as any[]) {\r\n            if (pred.status === 'won') {\r\n                wins++;\r\n                totalValuable++;\r\n                if (currentStreakType === 'w') {\r\n                    streak++;\r\n                } else {\r\n                    currentStreakType = 'w';\r\n                    streak = 1;\r\n                }\r\n                if (streak > bestStreak) bestStreak = streak;\r\n            } else if (pred.status === 'lost') {\r\n                losses++;\r\n                totalValuable++;\r\n                if (currentStreakType === 'l') {\r\n                    streak++;\r\n                } else {\r\n                    currentStreakType = 'l';\r\n                    streak = 1;\r\n                }\r\n                streak = 0; // Current win streak reset to 0 in display terms if we only track win streaks\r\n                currentStreakType = 'l';\r\n            } else if (pred.status === 'push') {\r\n                pushes++;\r\n            }\r\n        }\r\n\r\n        const winRate = totalValuable > 0 ? (wins / totalValuable) * 100 : 0;\r\n        const vroi = totalValuable > 0 ? ((wins * 0.9) - losses) / totalValuable * 10 : 14.2; // Mock ROI formula or real one if stakes known\r\n\r\n        const newStats = {\r\n            horarios: sortedDocs.length,\r\n            resultados: wins + losses,\r\n            anotadores: wins,\r\n            asistentes: pushes,\r\n            rank: 24, // Placeholder for now\r\n            reputation: totalValuable * 15,\r\n            streak: `${streak}${currentStreakType || 'w'}`,\r\n            longestStreak: `${bestStreak}w`,\r\n            winRate: Number(winRate.toFixed(1)),\r\n            vroi: Number(vroi.toFixed(1))\r\n        };\r\n\r\n        // Update user profile with real stats\r\n        const userRef = doc(db, 'users', uid);\r\n        await updateDoc(userRef, { stats: newStats });\r\n\r\n        return newStats;\r\n    } catch (error) {\r\n        console.error('Error recalculating user stats:', error);\r\n        return null;\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 514, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/lib/analytics.ts"],"sourcesContent":["// Google Analytics Event Tracking Utilities\r\n\r\ndeclare global {\r\n    interface Window {\r\n        gtag?: (\r\n            command: 'event' | 'config',\r\n            targetId: string,\r\n            config?: Record<string, any>\r\n        ) => void;\r\n    }\r\n}\r\n\r\nexport const GA_EVENTS = {\r\n    // User Actions\r\n    SIGNUP: 'signup',\r\n    LOGIN: 'login',\r\n\r\n    // Predictions\r\n    PREDICTION_GENERATED: 'prediction_generated',\r\n    PREDICTION_SHARED: 'prediction_shared',\r\n\r\n    // Premium\r\n    PREMIUM_UPGRADE: 'premium_upgrade',\r\n    TRIAL_STARTED: 'trial_started',\r\n\r\n    // Engagement\r\n    PAGE_VIEW: 'page_view',\r\n    SHARE_CLICK: 'share_click',\r\n} as const;\r\n\r\n/**\r\n * Track a custom event in Google Analytics\r\n */\r\nexport const trackEvent = (\r\n    eventName: string,\r\n    eventParams?: Record<string, any>\r\n) => {\r\n    if (typeof window !== 'undefined' && window.gtag) {\r\n        window.gtag('event', eventName, eventParams);\r\n    }\r\n};\r\n\r\n/**\r\n * Track user signup\r\n */\r\nexport const trackSignup = (method: 'email' | 'google' = 'email') => {\r\n    trackEvent(GA_EVENTS.SIGNUP, {\r\n        method,\r\n        trial_included: true,\r\n    });\r\n};\r\n\r\n/**\r\n * Track user login\r\n */\r\nexport const trackLogin = (method: 'email' | 'google' = 'email') => {\r\n    trackEvent(GA_EVENTS.LOGIN, {\r\n        method,\r\n    });\r\n};\r\n\r\n/**\r\n * Track AI prediction generation\r\n */\r\nexport const trackPrediction = (params: {\r\n    sport: string;\r\n    propType: string;\r\n    probability: number;\r\n    playerName: string;\r\n}) => {\r\n    trackEvent(GA_EVENTS.PREDICTION_GENERATED, {\r\n        sport: params.sport,\r\n        prop_type: params.propType,\r\n        probability: params.probability,\r\n        player_name: params.playerName,\r\n        is_hot_pick: params.probability >= 75,\r\n    });\r\n};\r\n\r\n/**\r\n * Track prediction share\r\n */\r\nexport const trackShare = (params: {\r\n    sport: string;\r\n    playerName: string;\r\n    probability: number;\r\n}) => {\r\n    trackEvent(GA_EVENTS.PREDICTION_SHARED, {\r\n        sport: params.sport,\r\n        player_name: params.playerName,\r\n        probability: params.probability,\r\n    });\r\n};\r\n\r\n/**\r\n * Track premium upgrade\r\n */\r\nexport const trackPremiumUpgrade = (plan: string) => {\r\n    trackEvent(GA_EVENTS.PREMIUM_UPGRADE, {\r\n        plan,\r\n        value: plan === 'monthly' ? 9.99 : 99.99,\r\n        currency: 'USD',\r\n    });\r\n};\r\n\r\n/**\r\n * Track trial start\r\n */\r\nexport const trackTrialStart = () => {\r\n    trackEvent(GA_EVENTS.TRIAL_STARTED, {\r\n        trial_days: 15,\r\n    });\r\n};\r\n\r\n/**\r\n * Track custom page view\r\n */\r\nexport const trackPageView = (url: string, title?: string) => {\r\n    trackEvent(GA_EVENTS.PAGE_VIEW, {\r\n        page_path: url,\r\n        page_title: title || document.title,\r\n    });\r\n};\r\n"],"names":[],"mappings":"AAAA,4CAA4C;;;;;;;;;;;;;;;;;;;;;AAYrC,MAAM,YAAY;IACrB,eAAe;IACf,QAAQ;IACR,OAAO;IAEP,cAAc;IACd,sBAAsB;IACtB,mBAAmB;IAEnB,UAAU;IACV,iBAAiB;IACjB,eAAe;IAEf,aAAa;IACb,WAAW;IACX,aAAa;AACjB;AAKO,MAAM,aAAa,CACtB,WACA;IAEA,IAAI,+CAAkB,eAAe,OAAO,IAAI,EAAE;QAC9C,OAAO,IAAI,CAAC,SAAS,WAAW;IACpC;AACJ;AAKO,MAAM,cAAc,CAAC,SAA6B,OAAO;IAC5D,WAAW,UAAU,MAAM,EAAE;QACzB;QACA,gBAAgB;IACpB;AACJ;AAKO,MAAM,aAAa,CAAC,SAA6B,OAAO;IAC3D,WAAW,UAAU,KAAK,EAAE;QACxB;IACJ;AACJ;AAKO,MAAM,kBAAkB,CAAC;IAM5B,WAAW,UAAU,oBAAoB,EAAE;QACvC,OAAO,OAAO,KAAK;QACnB,WAAW,OAAO,QAAQ;QAC1B,aAAa,OAAO,WAAW;QAC/B,aAAa,OAAO,UAAU;QAC9B,aAAa,OAAO,WAAW,IAAI;IACvC;AACJ;AAKO,MAAM,aAAa,CAAC;IAKvB,WAAW,UAAU,iBAAiB,EAAE;QACpC,OAAO,OAAO,KAAK;QACnB,aAAa,OAAO,UAAU;QAC9B,aAAa,OAAO,WAAW;IACnC;AACJ;AAKO,MAAM,sBAAsB,CAAC;IAChC,WAAW,UAAU,eAAe,EAAE;QAClC;QACA,OAAO,SAAS,YAAY,OAAO;QACnC,UAAU;IACd;AACJ;AAKO,MAAM,kBAAkB;IAC3B,WAAW,UAAU,aAAa,EAAE;QAChC,YAAY;IAChB;AACJ;AAKO,MAAM,gBAAgB,CAAC,KAAa;IACvC,WAAW,UAAU,SAAS,EAAE;QAC5B,WAAW;QACX,YAAY,SAAS,SAAS,KAAK;IACvC;AACJ"}},
    {"offset": {"line": 606, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/contexts/AuthContext.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport {\r\n    signInWithEmailAndPassword,\r\n    createUserWithEmailAndPassword,\r\n    signInWithPopup,\r\n    signOut as firebaseSignOut,\r\n    onAuthStateChanged\r\n} from 'firebase/auth';\r\nimport { auth, googleProvider } from '@/lib/firebase';\r\nimport { type User } from 'firebase/auth';\r\nimport {\r\n    createUserProfile,\r\n    getUserProfile,\r\n    updateUserProfile,\r\n    updateLastLogin,\r\n    addFavoriteTeam,\r\n    removeFavoriteTeam,\r\n    incrementPredictionsUsed,\r\n    canMakePrediction,\r\n    savePrediction,\r\n    getUserPredictions,\r\n    calculateUserStats,\r\n    addFavoritePlayer,\r\n    removeFavoritePlayer,\r\n    type UserProfile,\r\n    type FavoritePlayer,\r\n    type PredictionRecord\r\n} from '@/lib/userService';\r\nimport { trackSignup, trackLogin, trackTrialStart } from '@/lib/analytics';\r\n\r\nexport interface AppNotification {\r\n    id: string;\r\n    uid: string;\r\n    title: string;\r\n    message: string;\r\n    type: 'info' | 'success' | 'warning' | 'error';\r\n    link?: string;\r\n    read: boolean;\r\n    timestamp: Date;\r\n}\r\n\r\ninterface AuthContextType {\r\n    user: UserProfile | null;\r\n    loading: boolean;\r\n    signIn: (email: string, password: string) => Promise<void>;\r\n    signUp: (email: string, password: string) => Promise<void>;\r\n    signInWithGoogle: () => Promise<void>;\r\n    signOut: () => Promise<void>;\r\n    addFavorite: (teamName: string) => Promise<void>;\r\n    removeFavorite: (teamName: string) => Promise<void>;\r\n    addPlayerFavorite: (player: FavoritePlayer) => Promise<void>;\r\n    removePlayerFavorite: (player: FavoritePlayer) => Promise<void>;\r\n    usePrediction: () => Promise<void>;\r\n    checkPredictionLimit: () => Promise<{ canPredict: boolean; remaining: number }>;\r\n    refreshUser: () => Promise<void>;\r\n    getHistory: (limit?: number) => Promise<PredictionRecord[]>;\r\n    saveToHistory: (prediction: Omit<PredictionRecord, 'uid' | 'timestamp'>) => Promise<void>;\r\n    saveParley: (parleyData: any) => Promise<void>;\r\n    updateUser: (updates: Partial<UserProfile>) => Promise<void>;\r\n    recalculateStats: () => Promise<void>;\r\n    notifications: AppNotification[];\r\n    unreadCount: number;\r\n    refreshNotifications: () => Promise<void>;\r\n    markRead: (id: string) => Promise<void>;\r\n    markAllRead: () => Promise<void>;\r\n    notify: (title: string, message: string, type?: AppNotification['type'], link?: string) => Promise<void>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n    const [user, setUser] = useState<UserProfile | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [notifications, setNotifications] = useState<AppNotification[]>([]);\r\n    const [unreadCount, setUnreadCount] = useState(0);\r\n    const [notifLoading, setNotifLoading] = useState(false);\r\n\r\n    const loadUserProfile = async (firebaseUser: User) => {\r\n        const uid = firebaseUser.uid;\r\n        const email = firebaseUser.email!;\r\n\r\n        console.log(`üë§ [Auth] Loading profile for ${uid}...`);\r\n        try {\r\n            // Try to get existing profile\r\n            let profile = await getUserProfile(uid);\r\n\r\n            // If profile doesn't exist, create it\r\n            if (!profile) {\r\n                console.log('üë§ [Auth] Creating new profile...');\r\n                profile = await createUserProfile(uid, email);\r\n            } else if (!profile.stats) {\r\n                // AUTO-REPAIR: Add missing stats for legacy profiles\r\n                console.log('ÔøΩ [Auth] Legacy profile detected (missing stats). Repairing...');\r\n                const defaultStats = {\r\n                    horarios: 0,\r\n                    resultados: 0,\r\n                    anotadores: 0,\r\n                    asistentes: 0,\r\n                    rank: 0,\r\n                    reputation: 0,\r\n                    streak: '0w',\r\n                    longestStreak: '0w',\r\n                    winRate: 0,\r\n                    vroi: 0\r\n                };\r\n                await updateUserProfile(uid, { stats: defaultStats });\r\n                profile.stats = defaultStats;\r\n            } else {\r\n                // Update last login\r\n                console.log('üë§ [Auth] Profile found, updating last login...');\r\n                await updateLastLogin(uid);\r\n            }\r\n\r\n            console.log('ÔøΩ [Auth] Profile loaded successfully:', profile.role);\r\n            // Merge Firebase Auth profile data not stored in Firestore\r\n            setUser({\r\n                ...profile,\r\n                displayName: firebaseUser.displayName || undefined,\r\n                photoURL: firebaseUser.photoURL || undefined\r\n            });\r\n        } catch (error) {\r\n            console.error('‚ùå [Auth] Error loading user profile:', error);\r\n            // Fallback to basic user data\r\n            setUser({\r\n                uid,\r\n                email,\r\n                displayName: firebaseUser.displayName || undefined,\r\n                photoURL: firebaseUser.photoURL || undefined,\r\n                isPremium: false,\r\n                predictionsUsed: 0,\r\n                predictionsLimit: 3,\r\n                totalPredictions: 0,\r\n                favoriteTeams: [],\r\n                favoritePlayers: [],\r\n                createdAt: new Date(),\r\n                lastLogin: new Date(),\r\n                role: 'user'\r\n            });\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        // Skip auth initialization if Firebase is not configured\r\n        if (!auth) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\r\n            if (firebaseUser) {\r\n                await loadUserProfile(firebaseUser);\r\n            } else {\r\n                setUser(null);\r\n            }\r\n            setLoading(false);\r\n        });\r\n\r\n        return unsubscribe;\r\n    }, []);\r\n\r\n    const signIn = async (email: string, password: string) => {\r\n        if (!auth) throw new Error('Firebase no est√° inicializado');\r\n        await signInWithEmailAndPassword(auth, email, password);\r\n        trackLogin('email');\r\n    };\r\n\r\n    const signUp = async (email: string, password: string) => {\r\n        if (!auth) throw new Error('Firebase no est√° inicializado');\r\n        await createUserWithEmailAndPassword(auth, email, password);\r\n        trackSignup('email');\r\n        trackTrialStart();\r\n    };\r\n\r\n    const signInWithGoogle = async () => {\r\n        if (!auth || !googleProvider) throw new Error('Firebase no est√° inicializado');\r\n        const result = await signInWithPopup(auth, googleProvider);\r\n        const uid = result.user.uid;\r\n        const profile = await getUserProfile(uid);\r\n\r\n        const { syncGoogleProfile } = await import('@/lib/services/googleProfileSync');\r\n        await syncGoogleProfile(result.user);\r\n\r\n        if (!profile) {\r\n            trackSignup('google');\r\n            trackTrialStart();\r\n        } else {\r\n            trackLogin('google');\r\n        }\r\n    };\r\n\r\n    const signOut = async () => {\r\n        if (!auth) throw new Error('Firebase no est√° inicializado');\r\n        await firebaseSignOut(auth);\r\n    };\r\n\r\n    const addFavorite = async (teamName: string) => {\r\n        if (!user) return;\r\n        await addFavoriteTeam(user.uid, teamName);\r\n        await refreshUser();\r\n    };\r\n\r\n    const removeFavorite = async (teamName: string) => {\r\n        if (!user) return;\r\n        await removeFavoriteTeam(user.uid, teamName);\r\n        await refreshUser();\r\n    };\r\n\r\n    const addPlayerFavorite = async (player: any) => {\r\n        if (!user) return;\r\n        await addFavoritePlayer(user.uid, player);\r\n        await refreshUser();\r\n    };\r\n\r\n    const removePlayerFavorite = async (player: any) => {\r\n        if (!user) return;\r\n        await removeFavoritePlayer(user.uid, player);\r\n        await refreshUser();\r\n    };\r\n\r\n    const usePrediction = async () => {\r\n        if (!user) return;\r\n        await incrementPredictionsUsed(user.uid);\r\n        await refreshUser();\r\n    };\r\n\r\n    const checkPredictionLimit = async () => {\r\n        if (!user) return { canPredict: false, remaining: 0 };\r\n        return await canMakePrediction(user.uid);\r\n    };\r\n\r\n    const refreshUser = async () => {\r\n        if (!user) return;\r\n        const profile = await getUserProfile(user.uid);\r\n        if (profile) {\r\n            setUser(profile);\r\n        }\r\n    };\r\n\r\n    const getHistory = async (limitCount?: number) => {\r\n        if (!user) return [];\r\n        return await getUserPredictions(user.uid, limitCount);\r\n    };\r\n\r\n    const saveToHistory = async (prediction: Omit<PredictionRecord, 'uid' | 'timestamp'>) => {\r\n        await savePrediction(user?.uid || 'guest', prediction);\r\n    };\r\n\r\n    const saveParley = async (parleyData: any) => {\r\n        if (!user) return;\r\n        const { saveParleyPrediction } = await import('@/lib/userService');\r\n        await saveParleyPrediction(user.uid, parleyData);\r\n    };\r\n\r\n    const updateUser = async (updates: Partial<UserProfile>) => {\r\n        if (!user) return;\r\n        const { updateUserProfile } = await import('@/lib/userService');\r\n        await updateUserProfile(user.uid, updates);\r\n        setUser(prev => prev ? { ...prev, ...updates } : null);\r\n    };\r\n\r\n    const recalculateStats = async () => {\r\n        if (!user) return;\r\n        const stats = await calculateUserStats(user.uid);\r\n        if (stats) {\r\n            setUser(prev => prev ? { ...prev, stats } : null);\r\n        }\r\n    };\r\n\r\n    const refreshNotifications = async () => {\r\n        // Obsoleto: ahora usamos subscribeToNotifications en tiempo real\r\n        console.log('üîî [Auth] refreshNotifications es obsoleto, usando tiempo real.');\r\n    };\r\n\r\n    const markRead = async (id: string) => {\r\n        // await markAsRead(id);\r\n        console.log('üîî [Auth] Marking as read (Stub):', id);\r\n        await refreshNotifications();\r\n    };\r\n\r\n    const markAllRead = async () => {\r\n        if (!user) return;\r\n        // await markAllAsRead(user.uid);\r\n        console.log('üîî [Auth] Marking all as read (Stub)');\r\n        await refreshNotifications();\r\n    };\r\n\r\n    const notify = async (title: string, message: string, type: AppNotification['type'] = 'info', link?: string) => {\r\n        if (!user) return;\r\n        try {\r\n            console.log('üîî [Auth] Creating notification (Stub):', title);\r\n            const newNotif: AppNotification = { id: Math.random().toString(36).substr(2, 9), uid: user.uid, title, message, type, link, read: false, timestamp: new Date() };\r\n            setNotifications(prev => [newNotif, ...prev]);\r\n            setUnreadCount(prev => prev + 1);\r\n            await refreshNotifications();\r\n        } catch (error) {\r\n            console.error('‚ùå [Auth] Error creating notification:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={{\r\n            user,\r\n            loading,\r\n            signIn,\r\n            signUp,\r\n            signInWithGoogle,\r\n            signOut,\r\n            addFavorite,\r\n            removeFavorite,\r\n            addPlayerFavorite,\r\n            removePlayerFavorite,\r\n            usePrediction,\r\n            checkPredictionLimit,\r\n            refreshUser,\r\n            getHistory,\r\n            saveToHistory,\r\n            saveParley,\r\n            updateUser,\r\n            recalculateStats,\r\n            notifications,\r\n            unreadCount,\r\n            refreshNotifications,\r\n            markRead,\r\n            markAllRead,\r\n            notify\r\n        }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useAuth() {\r\n    const context = useContext(AuthContext);\r\n    if (context === undefined) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 909, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/lib/services/notificationService.ts"],"sourcesContent":["/**\r\n * Servicio de Notificaciones Omnicanal\r\n * Maneja el env√≠o de alertas a Telegram y Discord.\r\n */\r\nimport { messaging } from '@/lib/firebase';\r\nimport { getToken, onMessage } from 'firebase/messaging';\r\n\r\nexport interface NotificationPayload {\r\n    title: string;\r\n    message: string;\r\n    sport?: string;\r\n    confidence?: number;\r\n    gameId?: string;\r\n    imageUrl?: string;\r\n}\r\n\r\nclass NotificationService {\r\n    /**\r\n     * Env√≠a una notificaci√≥n a Telegram\r\n     * Requiere TELEGRAM_BOT_TOKEN en el servidor\r\n     */\r\n    async sendTelegramMessage(chatId: string, payload: NotificationPayload): Promise<boolean> {\r\n        try {\r\n            const token = process.env.TELEGRAM_BOT_TOKEN;\r\n            if (!token) {\r\n                console.error('‚ùå TELEGRAM_BOT_TOKEN no configurado');\r\n                return false;\r\n            }\r\n\r\n            const text = `\r\nüî• *${payload.title}* üî•\r\n\r\n${payload.message}\r\n${payload.confidence ? `\\nüéØ Confianza: *${payload.confidence}%*` : ''}\r\n${payload.sport ? `\\nüèüÔ∏è Deporte: #${payload.sport.toUpperCase()}` : ''}\r\n\r\n[Ver Pron√≥stico Completo](https://pickgeniuspro.vercel.app/match/${payload.sport}/${payload.gameId})\r\n            `;\r\n\r\n            const response = await fetch(`https://api.telegram.org/bot${token}/sendMessage`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    chat_id: chatId,\r\n                    text: text,\r\n                    parse_mode: 'Markdown',\r\n                    disable_web_page_preview: false\r\n                })\r\n            });\r\n\r\n            return response.ok;\r\n        } catch (error) {\r\n            console.error('‚ùå Error enviando a Telegram:', error);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Env√≠a una notificaci√≥n a Discord v√≠a Webhook\r\n     */\r\n    async sendDiscordMessage(webhookUrl: string, payload: NotificationPayload): Promise<boolean> {\r\n        try {\r\n            const embed = {\r\n                title: payload.title,\r\n                description: payload.message,\r\n                color: payload.confidence && payload.confidence > 90 ? 0x00ff00 : 0xffa500,\r\n                fields: [\r\n                    { name: 'Deporte', value: payload.sport?.toUpperCase() || 'N/A', inline: true },\r\n                    { name: 'Confianza', value: `${payload.confidence}%` || 'N/A', inline: true }\r\n                ],\r\n                timestamp: new Date().toISOString(),\r\n                footer: { text: 'PickGenius Pro Notifications' },\r\n                url: `https://pickgeniuspro.vercel.app/match/${payload.sport}/${payload.gameId}`\r\n            };\r\n\r\n            const response = await fetch(webhookUrl, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    username: 'PickGenius Bot',\r\n                    embeds: [embed]\r\n                })\r\n            });\r\n\r\n            return response.ok;\r\n        } catch (error) {\r\n            console.error('‚ùå Error enviando a Discord:', error);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * L√≥gica para decidir si enviar una notificaci√≥n autom√°tica (Hot Picks)\r\n     */\r\n    shouldNotifyHotPick(confidence: number): boolean {\r\n        return confidence >= 85;\r\n    }\r\n}\r\n\r\nexport const notificationService = new NotificationService();\r\n\r\n/**\r\n * Solicita permiso para notificaciones y obtiene el token FCM\r\n * @param uid ID del usuario para asociar el token (opcional)\r\n */\r\nexport const requestNotificationPermission = async (uid?: string) => {\r\n    if (typeof window === 'undefined' || !messaging) {\r\n        return { permission: 'default' as NotificationPermission, token: null };\r\n    }\r\n\r\n    try {\r\n        const permission = await Notification.requestPermission();\r\n        if (permission === 'granted') {\r\n            const token = await getToken(messaging, {\r\n                vapidKey: process.env.NEXT_PUBLIC_FIREBASE_VAPID_KEY\r\n            });\r\n\r\n            if (uid && token) {\r\n                console.log(`[NotificationService] Token for user ${uid}:`, token);\r\n                // Aqu√≠ podr√≠as llamar a una funci√≥n de userService para guardar el token\r\n            }\r\n\r\n            return { permission, token };\r\n        }\r\n        return { permission, token: null };\r\n    } catch (error) {\r\n        console.error('‚ùå Error requesting notification permission:', error);\r\n        return { permission: 'default' as NotificationPermission, token: null };\r\n    }\r\n};\r\n\r\n/**\r\n * Escucha mensajes de Firebase en primer plano\r\n */\r\nexport const onMessageListener = () =>\r\n    new Promise((resolve) => {\r\n        if (typeof window === 'undefined' || !messaging) return;\r\n        onMessage(messaging, (payload) => {\r\n            console.log('[NotificationService] Foreground message received:', payload);\r\n            resolve(payload);\r\n        });\r\n    });\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1063, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/components/notifications/NotificationManager.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Bell, BellOff, BellRing } from 'lucide-react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { requestNotificationPermission, onMessageListener } from '@/lib/services/notificationService';\r\nimport { toast } from 'sonner';\r\n\r\nexport default function NotificationManager() {\r\n    const { user } = useAuth();\r\n    const [permission, setPermission] = useState<NotificationPermission>(() => {\r\n        if (typeof window !== 'undefined' && 'Notification' in window) {\r\n            return Notification.permission;\r\n        }\r\n        return 'default';\r\n    });\r\n    const [isSubscribed, setIsSubscribed] = useState(false);\r\n\r\n    useEffect(() => {\r\n        // Listen for foreground messages\r\n        onMessageListener()\r\n            .then((payload: any) => {\r\n                if (payload) {\r\n                    toast(payload.notification?.title || 'Notificaci√≥n', {\r\n                        description: payload.notification?.body,\r\n                        icon: <BellRing className=\"w-5 h-5 text-purple-500\" />,\r\n                        duration: 5000,\r\n                    });\r\n                }\r\n            })\r\n            .catch(err => console.log('Error listening:', err));\r\n\r\n    }, []);\r\n\r\n    const handleSubscribe = async () => {\r\n        if (!user) {\r\n            toast.error('Inicia sesi√≥n para activar notificaciones');\r\n            return;\r\n        }\r\n\r\n        const toastId = toast.loading('Activando notificaciones...');\r\n\r\n        const result = await requestNotificationPermission(user.uid);\r\n\r\n        setPermission(result.permission);\r\n\r\n        if (result.permission === 'granted' && result.token) {\r\n            setIsSubscribed(true);\r\n            toast.success('¬°Notificaciones activadas!', { id: toastId });\r\n        } else if (result.permission === 'denied') {\r\n            toast.error('Permiso denegado. Habil√≠talo en tu navegador.', { id: toastId });\r\n        } else {\r\n            toast.dismiss(toastId);\r\n        }\r\n    };\r\n\r\n    if (permission === 'granted') {\r\n        return null; // O mostrar icono activo si quieres que sea visible siempre\r\n    }\r\n\r\n    return (\r\n        <button\r\n            onClick={handleSubscribe}\r\n            className=\"flex items-center gap-2 px-3 py-1.5 rounded-full bg-purple-600/20 hover:bg-purple-600/30 text-purple-300 text-xs font-bold transition-all border border-purple-500/30\"\r\n        >\r\n            <Bell className=\"w-3.5 h-3.5\" />\r\n            <span>Activar Alertas</span>\r\n        </button>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;AACA;;;AANA;;;;;;AAQe,SAAS;;IACpB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,6IAAO;IACxB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,gLAAQ;wCAAyB;YACjE,IAAI,+CAAkB,eAAe,kBAAkB,QAAQ;gBAC3D,OAAO,aAAa,UAAU;YAClC;YACA,OAAO;QACX;;IACA,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,gLAAQ,EAAC;IAEjD,IAAA,iLAAS;yCAAC;YACN,iCAAiC;YACjC,IAAA,qKAAiB,IACZ,IAAI;iDAAC,CAAC;oBACH,IAAI,SAAS;wBACT,IAAA,2JAAK,EAAC,QAAQ,YAAY,EAAE,SAAS,gBAAgB;4BACjD,aAAa,QAAQ,YAAY,EAAE;4BACnC,oBAAM,oMAAC,oOAAQ;gCAAC,WAAU;;;;;;4BAC1B,UAAU;wBACd;oBACJ;gBACJ;gDACC,KAAK;iDAAC,CAAA,MAAO,QAAQ,GAAG,CAAC,oBAAoB;;QAEtD;wCAAG,EAAE;IAEL,MAAM,kBAAkB;QACpB,IAAI,CAAC,MAAM;YACP,2JAAK,CAAC,KAAK,CAAC;YACZ;QACJ;QAEA,MAAM,UAAU,2JAAK,CAAC,OAAO,CAAC;QAE9B,MAAM,SAAS,MAAM,IAAA,iLAA6B,EAAC,KAAK,GAAG;QAE3D,cAAc,OAAO,UAAU;QAE/B,IAAI,OAAO,UAAU,KAAK,aAAa,OAAO,KAAK,EAAE;YACjD,gBAAgB;YAChB,2JAAK,CAAC,OAAO,CAAC,8BAA8B;gBAAE,IAAI;YAAQ;QAC9D,OAAO,IAAI,OAAO,UAAU,KAAK,UAAU;YACvC,2JAAK,CAAC,KAAK,CAAC,iDAAiD;gBAAE,IAAI;YAAQ;QAC/E,OAAO;YACH,2JAAK,CAAC,OAAO,CAAC;QAClB;IACJ;IAEA,IAAI,eAAe,WAAW;QAC1B,OAAO,MAAM,4DAA4D;IAC7E;IAEA,qBACI,oMAAC;QACG,SAAS;QACT,WAAU;;0BAEV,oMAAC,oNAAI;gBAAC,WAAU;;;;;;0BAChB,oMAAC;0BAAK;;;;;;;;;;;;AAGlB;GA7DwB;;QACH,6IAAO;;;KADJ"}},
    {"offset": {"line": 1182, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/components/layout/NotificationCenter.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { formatDistanceToNow } from 'date-fns';\r\nimport { es } from 'date-fns/locale';\r\nimport Link from 'next/link';\r\nimport { Bell, CheckCircle2, AlertTriangle, Info, BellOff } from 'lucide-react';\r\n\r\nconst NotificationCenter = () => {\r\n    const { notifications, unreadCount, markRead, markAllRead } = useAuth();\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const dropdownRef = useRef<HTMLDivElement>(null);\r\n\r\n    // DEBUG NOTIFICATIONS\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            console.log('üîî [NotificationCenter] DETALLE DE NOTIFICACIONES:');\r\n            console.log(' - No le√≠das (badge):', unreadCount);\r\n            console.log(' - Total cargadas:', notifications.length);\r\n            console.log(' - Datos:', notifications);\r\n        }\r\n    }, [isOpen, notifications, unreadCount]);\r\n\r\n    // Close when clicking outside\r\n    useEffect(() => {\r\n        const handleClickOutside = (event: MouseEvent) => {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n                setIsOpen(false);\r\n            }\r\n        };\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, []);\r\n\r\n    const getTypeStyles = (type: string) => {\r\n        switch (type) {\r\n            case 'success': return 'text-green-400 bg-green-400/10';\r\n            case 'warning': return 'text-yellow-400 bg-yellow-400/10';\r\n            case 'error': return 'text-red-400 bg-red-400/10';\r\n            default: return 'text-blue-400 bg-blue-400/10';\r\n        }\r\n    };\r\n\r\n    const getTypeIcon = (type: string) => {\r\n        switch (type) {\r\n            case 'success': return <CheckCircle2 className=\"w-5 h-5\" />;\r\n            case 'warning': return <AlertTriangle className=\"w-5 h-5\" />;\r\n            case 'error': return <AlertTriangle className=\"w-5 h-5\" />;\r\n            default: return <Info className=\"w-5 h-5\" />;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"relative\" ref={dropdownRef}>\r\n            {/* Bell Icon Button */}\r\n            <button\r\n                onClick={() => setIsOpen(!isOpen)}\r\n                className={`flex items-center justify-center w-11 h-11 rounded-xl transition-all duration-300 group mobile-haptic border ${isOpen\r\n                    ? 'bg-white/20 border-white/40 shadow-[0_0_15px_rgba(255,255,255,0.1)]'\r\n                    : 'bg-white/10 border-white/10 hover:bg-white/20 hover:border-white/30 shadow-lg'\r\n                    }`}\r\n                title=\"Notificaciones\"\r\n            >\r\n                <Bell\r\n                    className={`w-5 h-5 transition-all duration-300 ${unreadCount > 0\r\n                        ? 'text-yellow-400 fill-yellow-400/40 animate-bounce'\r\n                        : 'text-white'\r\n                        } ${isOpen ? 'scale-110' : 'scale-100'}`}\r\n                />\r\n\r\n                {unreadCount > 0 && (\r\n                    <span className=\"absolute -top-1.5 -right-1.5 min-w-[20px] h-[20px] px-1 bg-gradient-to-r from-red-500 to-rose-600 text-white text-[10px] font-black rounded-full flex items-center justify-center border-2 border-[#0a0a0a] shadow-[0_0_15px_rgba(239,68,68,0.7)] animate-pulse z-10\">\r\n                        {unreadCount > 9 ? '9+' : unreadCount}\r\n                    </span>\r\n                )}\r\n            </button>\r\n\r\n            {/* Dropdown Overlay for Mobile */}\r\n            {isOpen && (\r\n                <div\r\n                    className=\"fixed inset-0 bg-black/40 backdrop-blur-sm z-[9998] md:hidden\"\r\n                    onClick={() => setIsOpen(false)}\r\n                />\r\n            )}\r\n\r\n            {/* Dropdown */}\r\n            {isOpen && (\r\n                <div className=\"fixed right-2 left-2 md:left-auto md:right-4 top-20 md:top-24 w-auto md:w-96 glass-card border border-white/10 rounded-3xl shadow-[0_20px_60px_rgba(0,0,0,0.8)] z-[9999] overflow-hidden animate-in fade-in zoom-in-95 duration-200 backdrop-blur-3xl bg-[#0a0a0a]/95\">\r\n                    <div className=\"p-5 border-b border-white/5 flex justify-between items-center bg-white/[0.02]\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <h3 className=\"font-black text-[10px] uppercase tracking-[0.2em] text-white/80\">Centro de Inteligencia</h3>\r\n                            {unreadCount > 0 && (\r\n                                <span className=\"bg-red-500 text-white text-[8px] font-black px-1.5 py-0.5 rounded-full animate-pulse\">\r\n                                    {unreadCount} NUEVAS\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"flex items-center gap-4\">\r\n                            {unreadCount > 0 && (\r\n                                <button\r\n                                    onClick={() => markAllRead()}\r\n                                    className=\"text-[10px] font-bold text-blue-400 hover:text-blue-300 transition-colors uppercase tracking-widest\"\r\n                                >\r\n                                    Limpiar\r\n                                </button>\r\n                            )}\r\n                            <button\r\n                                onClick={() => setIsOpen(false)}\r\n                                className=\"md:hidden text-white/40 hover:text-white\"\r\n                            >\r\n                                <span className=\"text-xl\">√ó</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"max-h-[70vh] md:max-h-[450px] overflow-y-auto custom-scrollbar\">\r\n                        {notifications.length === 0 ? (\r\n                            <div className=\"py-20 text-center text-white/20 select-none\">\r\n                                <div className=\"text-5xl mb-4 grayscale opacity-30\">üîî</div>\r\n                                <p className=\"text-[10px] font-black uppercase tracking-[0.2em]\">Todo bajo control</p>\r\n                                <p className=\"text-[9px] text-white/10 mt-2\">No hay alertas cr√≠ticas en este momento</p>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"divide-y divide-white/5\">\r\n                                {notifications.map((notif) => (\r\n                                    <div\r\n                                        key={notif.id}\r\n                                        onClick={() => !notif.read && markRead(notif.id)}\r\n                                        className={`p-5 transition-all cursor-pointer relative group ${notif.read ? 'opacity-40 hover:opacity-80' : 'bg-white/[0.04] hover:bg-white/[0.08]'\r\n                                            }`}\r\n                                    >\r\n                                        {!notif.read && (\r\n                                            <div className=\"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-blue-500 to-indigo-600 shadow-[0_0_15px_rgba(59,130,246,0.5)]\"></div>\r\n                                        )}\r\n                                        <div className=\"flex gap-3\">\r\n                                            <div className={`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${getTypeStyles(notif.type)} border border-white/5`}>\r\n                                                {getTypeIcon(notif.type)}\r\n                                            </div>\r\n                                            <div className=\"flex-1 min-w-0\">\r\n                                                <div className=\"flex justify-between items-start mb-1\">\r\n                                                    <h4 className=\"font-black text-sm text-white truncate pr-2 uppercase tracking-tighter\">\r\n                                                        {notif.title}\r\n                                                    </h4>\r\n                                                    <span className=\"text-[9px] text-white/30 font-bold shrink-0 whitespace-nowrap mt-1\">\r\n                                                        {formatDistanceToNow(notif.timestamp, { addSuffix: true, locale: es })}\r\n                                                    </span>\r\n                                                </div>\r\n                                                <p className=\"text-xs text-white/50 leading-relaxed line-clamp-2 mb-2 font-medium\">\r\n                                                    {notif.message}\r\n                                                </p>\r\n                                                {notif.link && (\r\n                                                    <Link\r\n                                                        href={notif.link}\r\n                                                        className=\"inline-flex items-center gap-1 text-[9px] font-black text-blue-400 hover:text-blue-300 uppercase tracking-widest group-hover:translate-x-1 transition-transform\"\r\n                                                        onClick={(e) => e.stopPropagation()}\r\n                                                    >\r\n                                                        VER DETALLE ‚Üí\r\n                                                    </Link>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"p-3 bg-white/[0.02] border-t border-white/5 text-center\">\r\n                        <Link\r\n                            href=\"/profile\"\r\n                            onClick={() => setIsOpen(false)}\r\n                            className=\"text-[10px] font-black text-white/30 hover:text-white transition-colors uppercase tracking-[0.2em] mobile-haptic\"\r\n                        >\r\n                            Historial Completo\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NotificationCenter;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1582, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/components/layout/Navbar.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Link from 'next/link';\r\nimport Image from 'next/image';\r\nimport { usePathname } from 'next/navigation';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { useEffect, useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport NotificationManager from '@/components/notifications/NotificationManager';\r\nimport NotificationCenter from './NotificationCenter';\r\n\r\n\r\nexport default function Navbar() {\r\n    const { user, signOut, loading } = useAuth();\r\n    const pathname = usePathname();\r\n    const [isVisible, setIsVisible] = useState(true);\r\n    const [lastScrollY, setLastScrollY] = useState(0);\r\n    const [showOtrosModal, setShowOtrosModal] = useState(false);\r\n\r\n    const isActive = (path: string) => pathname === path || pathname.startsWith(path + '/');\r\n\r\n    useEffect(() => {\r\n        const controlNavbar = () => {\r\n            if (typeof window !== 'undefined') {\r\n                if (window.scrollY > lastScrollY && window.scrollY > 100) {\r\n                    setIsVisible(false);\r\n                } else {\r\n                    setIsVisible(true);\r\n                }\r\n                setLastScrollY(window.scrollY);\r\n            }\r\n        };\r\n\r\n        window.addEventListener('scroll', controlNavbar);\r\n        return () => window.removeEventListener('scroll', controlNavbar);\r\n    }, [lastScrollY]);\r\n\r\n    const navLinks = [\r\n        { href: '/basketball-live', label: 'Baloncesto', shortLabel: 'Basket', icon: 'üèÄ', color: 'bg-orange-600', textColor: 'text-orange-400' },\r\n        { href: '/football-live', label: 'F√∫tbol', shortLabel: 'F√∫tbol', icon: '‚öΩ', color: 'bg-green-600', textColor: 'text-green-400' },\r\n        { href: '/value-bets', label: 'Value Bets', shortLabel: 'Value', icon: 'üíé', color: 'bg-emerald-600', textColor: 'text-emerald-400' },\r\n        { href: '/parley', label: 'Smart Parley', shortLabel: 'Parley', icon: 'üéØ', color: 'bg-purple-600', textColor: 'text-purple-400' },\r\n        { href: '/streaks', label: 'Rachas', shortLabel: 'Rachas', icon: 'üî•', color: 'bg-orange-600', textColor: 'text-orange-400' },\r\n        { href: '/blog', label: 'Blog', shortLabel: 'Blog', icon: 'üì∞', color: 'bg-blue-600', textColor: 'text-blue-400' },\r\n    ];\r\n\r\n    const otrosDeportes = [\r\n        { href: '/bankroll', label: 'Bankroll Terminal', icon: 'üí∞' },\r\n        { href: '/props', label: 'Props Predictor', icon: 'üéØ' },\r\n        { href: '/american-football', label: 'F√∫tbol Americano (NFL)', icon: 'üèà' },\r\n        { href: '/baseball', label: 'B√©isbol (MLB)', icon: '‚öæ' },\r\n        { href: '/nhl', label: 'Hockey (NHL)', icon: 'üèí' },\r\n        { href: '/tennis', label: 'Tenis (ATP)', icon: 'üéæ' },\r\n    ];\r\n\r\n    return (\r\n        <>\r\n            {/* Mobile Top Bar - App Style */}\r\n            <div className=\"lg:hidden fixed top-0 left-0 right-0 z-50 pt-safe bg-[#0a0a0a]/95 backdrop-blur-xl border-b border-white/5 shadow-lg shadow-black/50\">\r\n                <div className=\"flex justify-between items-center h-16 px-6\">\r\n                    <Link href=\"/\" className=\"flex items-center gap-2\">\r\n                        <Image\r\n                            src=\"/logo.png\"\r\n                            alt=\"Logo\"\r\n                            width={28}\r\n                            height={28}\r\n                            className=\"rounded-lg shadow-[0_0_15px_rgba(168,85,247,0.4)]\"\r\n                        />\r\n                        <span className=\"text-sm font-black italic tracking-tighter uppercase text-white\">\r\n                            PICK<span className=\"text-purple-500\">GENIUS</span>\r\n                        </span>\r\n                    </Link>\r\n\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <NotificationCenter />\r\n                        {user && (\r\n                            <Link href=\"/profile\" className=\"w-8 h-8 rounded-full bg-gradient-to-br from-purple-600 to-blue-600 p-[1.5px] shadow-[0_0_10px_rgba(168,85,247,0.3)]\">\r\n                                <div className=\"w-full h-full rounded-full bg-[#0a0a0a] flex items-center justify-center overflow-hidden\">\r\n                                    {user.photoURL ? (\r\n                                        <Image src={user.photoURL} alt=\"Avatar\" width={32} height={32} className=\"w-full h-full object-cover\" />\r\n                                    ) : (\r\n                                        <span className=\"text-[10px] font-black text-white\">{user.email?.[0].toUpperCase()}</span>\r\n                                    )}\r\n                                </div>\r\n                            </Link>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <nav\r\n                className={`fixed left-0 right-0 z-50 transition-all duration-700 ease-in-out transform hidden lg:block ${isVisible ? 'translate-y-4 opacity-100' : '-translate-y-full opacity-0'\r\n                    }`}\r\n            >\r\n                <div className=\"container mx-auto px-4\">\r\n                    <div className=\"mx-auto max-w-6xl bg-[#0a0a0a]/60 backdrop-blur-3xl border border-white/10 rounded-[2.5rem] shadow-[0_20px_50px_rgba(0,0,0,0.5)] px-8 relative group\">\r\n                        <div className=\"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent\"></div>\r\n\r\n                        <div className=\"flex justify-between items-center h-20\">\r\n                            {/* Logo */}\r\n                            <Link href=\"/\" className=\"flex items-center gap-3 hover:scale-105 transition-transform\">\r\n                                <Image\r\n                                    src=\"/logo.png\"\r\n                                    alt=\"PickGenius Logo\"\r\n                                    width={36}\r\n                                    height={36}\r\n                                    className=\"rounded-xl drop-shadow-[0_0_10px_rgba(168,85,247,0.3)]\"\r\n                                    priority\r\n                                />\r\n                                <span className=\"text-xl font-black italic tracking-tighter uppercase text-white group-hover:text-purple-400 transition-colors\">\r\n                                    PICK<span className=\"text-purple-500\">GENIUS</span>\r\n                                </span>\r\n                            </Link>\r\n\r\n                            {/* Navigation Links - Desktop Only */}\r\n                            <div className=\"flex items-center gap-4\">\r\n                                {navLinks.map((link) => (\r\n                                    <Link\r\n                                        key={link.href}\r\n                                        href={link.href}\r\n                                        className={`relative px-4 py-2.5 rounded-full text-[10px] font-black uppercase tracking-widest transition-all duration-500 flex items-center gap-2\r\n                                                ${isActive(link.href)\r\n                                                ? `${link.textColor} bg-white/5 shadow-[inset_0_0_20px_rgba(255,255,255,0.05)]`\r\n                                                : 'text-gray-400 hover:text-white hover:bg-white/5'\r\n                                            }`}\r\n                                    >\r\n                                        <span className=\"text-base\">{link.icon}</span>\r\n                                        <span className=\"hidden xl:block\">{link.label}</span>\r\n                                        {isActive(link.href) && (\r\n                                            <motion.div\r\n                                                layoutId=\"nav-active\"\r\n                                                className={`absolute inset-0 border border-white/20 rounded-full z-[-1] ${link.color}/5`}\r\n                                                transition={{ type: \"spring\", bounce: 0.2, duration: 0.6 }}\r\n                                            />\r\n                                        )}\r\n                                    </Link>\r\n                                ))}\r\n\r\n                                {/* Desktop \"M√°s\" Toggle */}\r\n                                <button\r\n                                    onClick={() => setShowOtrosModal(true)}\r\n                                    className=\"px-4 py-2.5 rounded-full text-[10px] font-black uppercase tracking-widest text-gray-400 hover:text-white hover:bg-white/5 transition-all flex items-center gap-2 border border-white/5\"\r\n                                >\r\n                                    <span>‚ûï</span>\r\n                                    <span>M√°s</span>\r\n                                </button>\r\n                            </div>\r\n\r\n                            {/* Auth & Mobile Mini */}\r\n                            <div className=\"flex items-center gap-4\">\r\n                                {!loading && (\r\n                                    user ? (\r\n                                        <div className=\"flex items-center gap-4\">\r\n                                            {user.role === 'admin' && (\r\n                                                <Link\r\n                                                    href=\"/admin\"\r\n                                                    className=\"hidden md:flex items-center gap-2 text-[10px] font-black tracking-[0.2em] border-2 border-red-500 bg-red-500/10 px-5 py-2 rounded-xl text-red-500 hover:bg-red-500 hover:text-white transition-all shadow-[0_0_20px_rgba(239,68,68,0.3)] animate-pulse\"\r\n                                                >\r\n                                                    <span className=\"w-2 h-2 bg-red-500 rounded-full\"></span>\r\n                                                    ADMIN PANEL\r\n                                                </Link>\r\n                                            )}\r\n\r\n                                            <NotificationManager />\r\n                                            <NotificationCenter />\r\n\r\n                                            {/* User Dropdown */}\r\n                                            <div className=\"relative group/profile\">\r\n                                                <Link href=\"/profile\" className=\"flex items-center\">\r\n                                                    <div className=\"w-11 h-11 rounded-full bg-gradient-to-br from-purple-600 to-blue-600 flex items-center justify-center border-2 border-white/10 group-hover/profile:border-purple-400 transition-all shadow-[0_0_25px_rgba(168,85,247,0.4)] relative overflow-hidden\">\r\n                                                        {user.photoURL ? (\r\n                                                            <Image src={user.photoURL} alt=\"Avatar\" width={44} height={44} className=\"w-full h-full object-cover\" />\r\n                                                        ) : (\r\n                                                            <span className=\"text-sm font-black italic uppercase text-white\">\r\n                                                                {user.email?.[0].toUpperCase()}\r\n                                                            </span>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </Link>\r\n\r\n                                                {/* Desktop Profile Menu */}\r\n                                                <div className=\"absolute top-full right-0 mt-4 w-52 bg-[#0c0c0c]/98 backdrop-blur-3xl border border-white/10 rounded-[2rem] shadow-2xl opacity-0 invisible group-hover/profile:opacity-100 group-hover/profile:visible transition-all duration-300 p-3 z-50\">\r\n                                                    {user.role === 'admin' && (\r\n                                                        <Link href=\"/admin\" className=\"md:hidden flex items-center gap-3 px-4 py-3 rounded-xl bg-red-500/10 text-red-500 text-[9px] font-black uppercase tracking-widest mb-2 border border-red-500/20\">\r\n                                                            <span>üõ°Ô∏è</span> Panel Admin\r\n                                                        </Link>\r\n                                                    )}\r\n                                                    <div className=\"px-4 py-3 border-b border-white/5 mb-2\">\r\n                                                        <p className=\"text-[10px] font-black text-white truncate uppercase tracking-tighter\">\r\n                                                            {user.displayName || user.email?.split('@')[0]}\r\n                                                        </p>\r\n                                                        <p className=\"text-[8px] font-bold text-gray-500 uppercase tracking-widest truncate\">\r\n                                                            {user.role === 'admin' ? 'SYSTEM ADMINISTRATOR' : 'PREMIUM ANALYST'}\r\n                                                        </p>\r\n                                                    </div>\r\n                                                    <Link href=\"/profile\" className=\"flex items-center gap-3 px-4 py-4 rounded-xl hover:bg-white/5 transition-all text-xs font-bold text-gray-400 hover:text-white\">\r\n                                                        <span>üë§</span> Mi Perfil\r\n                                                    </Link>\r\n                                                    <Link href=\"/my-stats\" className=\"flex items-center gap-3 px-4 py-4 rounded-xl hover:bg-white/5 transition-all text-xs font-bold text-gray-400 hover:text-white\">\r\n                                                        <span>üìà</span> Mi Rendimiento\r\n                                                    </Link>\r\n                                                    <Link href=\"/profile?tab=settings\" className=\"flex items-center gap-3 px-4 py-4 rounded-xl hover:bg-white/5 transition-all text-xs font-bold text-gray-400 hover:text-white\">\r\n                                                        <span>‚öôÔ∏è</span> Ajustes\r\n                                                    </Link>\r\n                                                    <button\r\n                                                        onClick={() => signOut()}\r\n                                                        className=\"w-full flex items-center gap-3 px-4 py-4 rounded-xl hover:bg-red-500/10 transition-all text-xs font-bold text-red-500/70 hover:text-red-500\"\r\n                                                    >\r\n                                                        <span>‚ö°</span> Desconectar\r\n                                                    </button>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div className=\"flex gap-2\">\r\n                                            <Link href=\"/auth/register\" className=\"relative overflow-hidden px-8 py-3.5 bg-white text-black text-[10px] font-black uppercase tracking-widest rounded-full hover:scale-105 transition-all shadow-[0_15px_35px_rgba(255,255,255,0.25)]\">\r\n                                                UNIRSE AHORA\r\n                                            </Link>\r\n                                        </div>\r\n                                    )\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </nav>\r\n\r\n            {/* Mobile Bottom Navigation */}\r\n            <nav className=\"lg:hidden fixed bottom-0 left-0 right-0 z-50 pb-safe mobile-haptic\">\r\n                <div className=\"bg-[#0a0a0a]/95 backdrop-blur-3xl border-t border-white/10 shadow-[0_-15px_45px_rgba(0,0,0,0.9)] rounded-t-[3rem] overflow-hidden\">\r\n                    <div className=\"grid grid-cols-5 gap-0 px-2 pt-5 pb-3\">\r\n                        {navLinks.map((link) => (\r\n                            <Link\r\n                                key={link.href}\r\n                                href={link.href}\r\n                                className=\"flex flex-col items-center justify-center gap-2 py-1\"\r\n                            >\r\n                                <div className={`relative flex items-center justify-center transition-all duration-500 ${isActive(link.href)\r\n                                    ? 'scale-125 -translate-y-1.5'\r\n                                    : 'scale-100 opacity-30 shadow-none'\r\n                                    }`}>\r\n                                    <span className=\"text-2xl drop-shadow-[0_0_12px_rgba(255,255,255,0.3)]\">{link.icon}</span>\r\n                                    {isActive(link.href) && (\r\n                                        <motion.div\r\n                                            layoutId=\"mobile-nav-active\"\r\n                                            className=\"absolute -inset-3 bg-white/15 rounded-2xl z-[-1]\"\r\n                                            transition={{ type: \"spring\", bounce: 0.4, duration: 0.6 }}\r\n                                        />\r\n                                    )}\r\n                                </div>\r\n                                <span className={`text-[9px] font-black uppercase tracking-[0.15em] transition-colors ${isActive(link.href)\r\n                                    ? 'text-white'\r\n                                    : 'text-gray-700'\r\n                                    }`}>\r\n                                    {link.shortLabel}\r\n                                </span>\r\n                            </Link>\r\n                        ))}\r\n\r\n                        {/* Mobile \"M√°s\" Button */}\r\n                        <button\r\n                            onClick={() => setShowOtrosModal(true)}\r\n                            className=\"flex flex-col items-center justify-center gap-2 py-1\"\r\n                        >\r\n                            <div className=\"relative flex items-center justify-center scale-100 opacity-30\">\r\n                                <span className=\"text-2xl\">‚ûï</span>\r\n                            </div>\r\n                            <span className=\"text-[9px] font-black uppercase tracking-[0.15em] text-gray-700\">\r\n                                M√°s\r\n                            </span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </nav>\r\n\r\n            {/* Mobile \"Otros Deportes\" Modal */}\r\n            <AnimatePresence>\r\n                {showOtrosModal && (\r\n                    <div className=\"contents\">\r\n                        <motion.div\r\n                            initial={{ opacity: 0 }}\r\n                            animate={{ opacity: 1 }}\r\n                            exit={{ opacity: 0 }}\r\n                            onClick={() => setShowOtrosModal(false)}\r\n                            className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60]\"\r\n                        />\r\n                        <motion.div\r\n                            initial={{ opacity: 0, scale: 0.9, y: 20 }}\r\n                            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                            exit={{ opacity: 0, scale: 0.9, y: 20 }}\r\n                            transition={{ type: \"spring\", bounce: 0.3 }}\r\n                            className=\"fixed inset-x-4 bottom-24 lg:bottom-auto lg:top-24 lg:left-auto lg:right-24 lg:w-96 z-[70] bg-[#0c0c0c]/98 backdrop-blur-3xl border border-white/10 rounded-3xl shadow-2xl p-6\"\r\n                        >\r\n                            <div className=\"flex justify-between items-center mb-6\">\r\n                                <h3 className=\"text-lg font-black uppercase tracking-wider text-white\">\r\n                                    Otros Deportes\r\n                                </h3>\r\n                                <button\r\n                                    onClick={() => setShowOtrosModal(false)}\r\n                                    className=\"w-8 h-8 rounded-full bg-white/5 hover:bg-white/10 flex items-center justify-center transition-colors\"\r\n                                >\r\n                                    <span className=\"text-white text-xl\">√ó</span>\r\n                                </button>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-2 gap-3\">\r\n                                {otrosDeportes.map((deporte) => (\r\n                                    <Link\r\n                                        key={deporte.href}\r\n                                        href={deporte.href}\r\n                                        onClick={() => setShowOtrosModal(false)}\r\n                                        className=\"flex flex-col items-center gap-3 p-5 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-white/20 transition-all group\"\r\n                                    >\r\n                                        <span className=\"text-4xl group-hover:scale-110 transition-transform\">\r\n                                            {deporte.icon}\r\n                                        </span>\r\n                                        <span className=\"text-[10px] font-black uppercase tracking-wide text-center text-gray-300 group-hover:text-white transition-colors\">\r\n                                            {deporte.label}\r\n                                        </span>\r\n                                    </Link>\r\n                                ))}\r\n                            </div>\r\n                        </motion.div>\r\n                    </div>\r\n                )}\r\n            </AnimatePresence>\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2450, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/components/layout/Footer.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Link from 'next/link';\r\n\r\nexport default function Footer() {\r\n    return (\r\n        <footer className=\"bg-[#050505] border-t border-[#1a1a1a] py-12 text-sm text-[var(--text-muted)]\">\r\n            <div className=\"container mx-auto px-4\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8\">\r\n                    {/* Brand */}\r\n                    <div className=\"col-span-1 md:col-span-2\">\r\n                        <Link href=\"/\" className=\"inline-block mb-4\">\r\n                            <span className=\"text-2xl font-bold bg-gradient-to-r from-purple-400 via-blue-400 to-purple-400 bg-clip-text text-transparent\">\r\n                                PickGenius\r\n                            </span>\r\n                        </Link>\r\n                        <p className=\"max-w-xs mb-4\">\r\n                            La plataforma de an√°lisis deportivo m√°s avanzada, impulsada por Inteligencia Artificial para darte ventaja en cada jugada.\r\n                        </p>\r\n                        <div className=\"flex gap-4\">\r\n                            {/* Social Placeholders */}\r\n                            <a href=\"#\" className=\"hover:text-white transition-colors\">Twitter (X)</a>\r\n                            <a href=\"#\" className=\"hover:text-white transition-colors\">Instagram</a>\r\n                            <a href=\"#\" className=\"hover:text-white transition-colors\">Discord</a>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Links 1 */}\r\n                    <div>\r\n                        <h4 className=\"text-white font-bold mb-4 uppercase tracking-wider text-xs\">Plataforma</h4>\r\n                        <ul className=\"space-y-2\">\r\n                            <li><Link href=\"/football-live\" className=\"hover:text-[var(--primary)] transition-colors\">F√∫tbol en Vivo</Link></li>\r\n                            <li><Link href=\"/basketball-live\" className=\"hover:text-[var(--primary)] transition-colors\">Baloncesto en Vivo</Link></li>\r\n                            <li><Link href=\"/pricing\" className=\"hover:text-[var(--primary)] transition-colors\">Planes Premium</Link></li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    {/* Links 2 */}\r\n                    <div>\r\n                        <h4 className=\"text-white font-bold mb-4 uppercase tracking-wider text-xs\">Legal</h4>\r\n                        <ul className=\"space-y-2\">\r\n                            <li><Link href=\"/terms\" className=\"hover:text-[var(--primary)] transition-colors\">T√©rminos de Servicio</Link></li>\r\n                            <li><Link href=\"/privacy\" className=\"hover:text-[var(--primary)] transition-colors\">Pol√≠tica de Privacidad</Link></li>\r\n                            <li><Link href=\"/contact\" className=\"hover:text-[var(--primary)] transition-colors\">Contacto</Link></li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"border-t border-[#1a1a1a] pt-8 flex flex-col md:flex-row justify-between items-center gap-4\">\r\n                    <p>&copy; {new Date().getFullYear()} PickGenius AI. Todos los derechos reservados.</p>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <span className=\"w-2 h-2 rounded-full bg-green-500 animate-pulse\"></span>\r\n                        <span className=\"text-xs\">Sistemas Operativos</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </footer>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS;IACpB,qBACI,oMAAC;QAAO,WAAU;kBACd,cAAA,oMAAC;YAAI,WAAU;;8BACX,oMAAC;oBAAI,WAAU;;sCAEX,oMAAC;4BAAI,WAAU;;8CACX,oMAAC,iLAAI;oCAAC,MAAK;oCAAI,WAAU;8CACrB,cAAA,oMAAC;wCAAK,WAAU;kDAA+G;;;;;;;;;;;8CAInI,oMAAC;oCAAE,WAAU;8CAAgB;;;;;;8CAG7B,oMAAC;oCAAI,WAAU;;sDAEX,oMAAC;4CAAE,MAAK;4CAAI,WAAU;sDAAqC;;;;;;sDAC3D,oMAAC;4CAAE,MAAK;4CAAI,WAAU;sDAAqC;;;;;;sDAC3D,oMAAC;4CAAE,MAAK;4CAAI,WAAU;sDAAqC;;;;;;;;;;;;;;;;;;sCAKnE,oMAAC;;8CACG,oMAAC;oCAAG,WAAU;8CAA6D;;;;;;8CAC3E,oMAAC;oCAAG,WAAU;;sDACV,oMAAC;sDAAG,cAAA,oMAAC,iLAAI;gDAAC,MAAK;gDAAiB,WAAU;0DAAgD;;;;;;;;;;;sDAC1F,oMAAC;sDAAG,cAAA,oMAAC,iLAAI;gDAAC,MAAK;gDAAmB,WAAU;0DAAgD;;;;;;;;;;;sDAC5F,oMAAC;sDAAG,cAAA,oMAAC,iLAAI;gDAAC,MAAK;gDAAW,WAAU;0DAAgD;;;;;;;;;;;;;;;;;;;;;;;sCAK5F,oMAAC;;8CACG,oMAAC;oCAAG,WAAU;8CAA6D;;;;;;8CAC3E,oMAAC;oCAAG,WAAU;;sDACV,oMAAC;sDAAG,cAAA,oMAAC,iLAAI;gDAAC,MAAK;gDAAS,WAAU;0DAAgD;;;;;;;;;;;sDAClF,oMAAC;sDAAG,cAAA,oMAAC,iLAAI;gDAAC,MAAK;gDAAW,WAAU;0DAAgD;;;;;;;;;;;sDACpF,oMAAC;sDAAG,cAAA,oMAAC,iLAAI;gDAAC,MAAK;gDAAW,WAAU;0DAAgD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAKhG,oMAAC;oBAAI,WAAU;;sCACX,oMAAC;;gCAAE;gCAAQ,IAAI,OAAO,WAAW;gCAAG;;;;;;;sCACpC,oMAAC;4BAAI,WAAU;;8CACX,oMAAC;oCAAK,WAAU;;;;;;8CAChB,oMAAC;oCAAK,WAAU;8CAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMlD;KAtDwB"}},
    {"offset": {"line": 2749, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/components/ui/ToastProvider.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { Toaster } from 'sonner';\r\n\r\nexport default function ToastProvider() {\r\n    return (\r\n        <Toaster\r\n            position=\"top-center\"\r\n            theme=\"dark\"\r\n            richColors\r\n            closeButton\r\n            style={{\r\n                fontFamily: 'var(--font-outfit), sans-serif',\r\n            }}\r\n            toastOptions={{\r\n                style: {\r\n                    background: 'rgba(20, 20, 20, 0.8)',\r\n                    backdropFilter: 'blur(12px)',\r\n                    border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                    color: 'white',\r\n                },\r\n                className: 'glass-card',\r\n            }}\r\n        />\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS;IACpB,qBACI,oMAAC,6JAAO;QACJ,UAAS;QACT,OAAM;QACN,UAAU;QACV,WAAW;QACX,OAAO;YACH,YAAY;QAChB;QACA,cAAc;YACV,OAAO;gBACH,YAAY;gBACZ,gBAAgB;gBAChB,QAAQ;gBACR,OAAO;YACX;YACA,WAAW;QACf;;;;;;AAGZ;KArBwB"}},
    {"offset": {"line": 2792, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/components/providers/QueryProvider.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools';\r\nimport { useState, type ReactNode } from 'react';\r\n\r\nexport default function QueryProvider({ children }: { children: ReactNode }) {\r\n    const [queryClient] = useState(\r\n        () =>\r\n            new QueryClient({\r\n                defaultOptions: {\r\n                    queries: {\r\n                        // Default stale time of 1 minute to avoid excessive refetching\r\n                        staleTime: 60 * 1000,\r\n                        // Retry failed queries 1 time\r\n                        retry: 1,\r\n                        // Refetch on window focus for live data freshness\r\n                        refetchOnWindowFocus: true,\r\n                    },\r\n                },\r\n            })\r\n    );\r\n\r\n    return (\r\n        <QueryClientProvider client={queryClient}>\r\n            {children}\r\n            <ReactQueryDevtools initialIsOpen={false} />\r\n        </QueryClientProvider>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;;;AAJA;;;;AAMe,SAAS,cAAc,EAAE,QAAQ,EAA2B;;IACvE,MAAM,CAAC,YAAY,GAAG,IAAA,gLAAQ;kCAC1B,IACI,IAAI,sMAAW,CAAC;gBACZ,gBAAgB;oBACZ,SAAS;wBACL,+DAA+D;wBAC/D,WAAW,KAAK;wBAChB,8BAA8B;wBAC9B,OAAO;wBACP,kDAAkD;wBAClD,sBAAsB;oBAC1B;gBACJ;YACJ;;IAGR,qBACI,oMAAC,uNAAmB;QAAC,QAAQ;;YACxB;0BACD,oMAAC,oNAAkB;gBAAC,eAAe;;;;;;;;;;;;AAG/C;GAvBwB;KAAA"}},
    {"offset": {"line": 2852, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/components/ui/GlobalErrorBoundary.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { Component, ErrorInfo, ReactNode } from 'react';\r\nimport { AlertTriangle, RefreshCw, Home } from 'lucide-react';\r\nimport Link from 'next/link';\r\n\r\ninterface Props {\r\n    children: ReactNode;\r\n}\r\n\r\ninterface State {\r\n    hasError: boolean;\r\n    error?: Error;\r\n}\r\n\r\nclass GlobalErrorBoundary extends Component<Props, State> {\r\n    public state: State = {\r\n        hasError: false\r\n    };\r\n\r\n    public static getDerivedStateFromError(error: Error): State {\r\n        return { hasError: true, error };\r\n    }\r\n\r\n    public componentDidCatch(error: Error, errorInfo: ErrorInfo) {\r\n        console.error('üî• Global Error Caught:', error, errorInfo);\r\n    }\r\n\r\n    public render() {\r\n        if (this.state.hasError) {\r\n            return (\r\n                <div className=\"min-h-screen bg-[#050505] text-white flex items-center justify-center p-4\">\r\n                    <div className=\"absolute inset-0 overflow-hidden z-0\">\r\n                        <div className=\"absolute top-0 right-0 w-[50%] h-[50%] bg-red-500/5 blur-[120px] rounded-full\"></div>\r\n                        <div className=\"absolute bottom-0 left-0 w-[50%] h-[50%] bg-emerald-500/5 blur-[120px] rounded-full\"></div>\r\n                    </div>\r\n\r\n                    <div className=\"relative z-10 glass-card max-w-lg w-full p-8 md:p-12 rounded-[2rem] border border-white/10 text-center shadow-2xl backdrop-blur-xl bg-black/40\">\r\n                        <div className=\"w-20 h-20 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-6 border border-red-500/20 animate-pulse\">\r\n                            <AlertTriangle className=\"w-10 h-10 text-red-500\" />\r\n                        </div>\r\n\r\n                        <h1 className=\"text-3xl font-black italic tracking-tighter mb-2\">\r\n                            ALGO SALI√ì <span className=\"text-red-500\">MAL</span>\r\n                        </h1>\r\n\r\n                        <p className=\"text-gray-400 mb-8 font-mono text-sm leading-relaxed\">\r\n                            {this.state.error?.message || \"Ha ocurrido un error inesperado en el sistema. Nuestro equipo de IA ya ha sido notificado.\"}\r\n                        </p>\r\n\r\n                        <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\r\n                            <button\r\n                                onClick={() => window.location.reload()}\r\n                                className=\"group flex items-center justify-center gap-2 px-6 py-3 bg-white text-black font-bold rounded-xl hover:bg-gray-200 transition-all hover:scale-105\"\r\n                            >\r\n                                <RefreshCw className=\"w-5 h-5 group-hover:rotate-180 transition-transform duration-500\" />\r\n                                Reintentar\r\n                            </button>\r\n\r\n                            <button\r\n                                onClick={() => window.location.href = '/'}\r\n                                className=\"flex items-center justify-center gap-2 px-6 py-3 bg-white/5 border border-white/10 text-white font-bold rounded-xl hover:bg-white/10 transition-all hover:border-white/20\"\r\n                            >\r\n                                <Home className=\"w-5 h-5\" />\r\n                                Ir al Inicio\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"mt-8 text-[10px] text-gray-600 font-mono uppercase tracking-widest\">\r\n                            Error Code: 500 ‚Ä¢ System Breach\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\nexport default GlobalErrorBoundary;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAHA;;;;AAeA,MAAM,4BAA4B,iLAAS;IAChC,QAAe;QAClB,UAAU;IACd,EAAE;IAEF,OAAc,yBAAyB,KAAY,EAAS;QACxD,OAAO;YAAE,UAAU;YAAM;QAAM;IACnC;IAEO,kBAAkB,KAAY,EAAE,SAAoB,EAAE;QACzD,QAAQ,KAAK,CAAC,2BAA2B,OAAO;IACpD;IAEO,SAAS;QACZ,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;YACrB,qBACI,oMAAC;gBAAI,WAAU;;kCACX,oMAAC;wBAAI,WAAU;;0CACX,oMAAC;gCAAI,WAAU;;;;;;0CACf,oMAAC;gCAAI,WAAU;;;;;;;;;;;;kCAGnB,oMAAC;wBAAI,WAAU;;0CACX,oMAAC;gCAAI,WAAU;0CACX,cAAA,oMAAC,mPAAa;oCAAC,WAAU;;;;;;;;;;;0CAG7B,oMAAC;gCAAG,WAAU;;oCAAmD;kDAClD,oMAAC;wCAAK,WAAU;kDAAe;;;;;;;;;;;;0CAG9C,oMAAC;gCAAE,WAAU;0CACR,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,WAAW;;;;;;0CAGlC,oMAAC;gCAAI,WAAU;;kDACX,oMAAC;wCACG,SAAS,IAAM,OAAO,QAAQ,CAAC,MAAM;wCACrC,WAAU;;0DAEV,oMAAC,uOAAS;gDAAC,WAAU;;;;;;4CAAqE;;;;;;;kDAI9F,oMAAC;wCACG,SAAS,IAAM,OAAO,QAAQ,CAAC,IAAI,GAAG;wCACtC,WAAU;;0DAEV,oMAAC,qNAAI;gDAAC,WAAU;;;;;;4CAAY;;;;;;;;;;;;;0CAKpC,oMAAC;gCAAI,WAAU;0CAAqE;;;;;;;;;;;;;;;;;;QAMpG;QAEA,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ;IAC9B;AACJ;uCAEe"}},
    {"offset": {"line": 3026, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/lib/api.ts"],"sourcesContent":["// Configuraci√≥n centralizada de la API\r\nconst isServer = typeof window === 'undefined';\r\nconst DEFAULT_BASE_URL = isServer ? (process.env.VERCEL_URL ? `https://${process.env.VERCEL_URL}` : 'http://localhost:3000') : '';\r\nexport const API_URL = process.env.NEXT_PUBLIC_API_BASE_URL || DEFAULT_BASE_URL;\r\n\r\nexport async function fetchAPI(endpoint: string, options?: RequestInit, retries = 3, backoff = 1000) {\r\n    // Ensure endpoint starts with / if it's not an absolute URL\r\n    const isAbsolute = endpoint.startsWith('http');\r\n    let url = endpoint;\r\n\r\n    if (!isAbsolute) {\r\n        // En el servidor, necesitamos URLs absolutas. En el cliente, las relativas funcionan (pero las absolutas tambi√©n).\r\n        const baseUrl = API_URL.replace(/\\/$/, '');\r\n        const cleanEndpoint = endpoint.startsWith('/') ? endpoint : `/${endpoint}`;\r\n        url = `${baseUrl}${cleanEndpoint}`;\r\n    }\r\n\r\n    console.log(`üîç [API] Fetching: ${url} (Retries left: ${retries})`);\r\n\r\n    try {\r\n        const response = await fetch(url, {\r\n            ...options,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'ngrok-skip-browser-warning': 'true',\r\n                'bypass-tunnel-reminder': 'true',\r\n                ...options?.headers,\r\n            },\r\n        });\r\n\r\n        // Handle Rate Limiting (429) or Service Unavailable (503)\r\n        if ((response.status === 429 || response.status === 503) && retries > 0) {\r\n            const waitTime = backoff * (4 - retries); // Exponential backoff: 1s, 2s, 3s\r\n            console.warn(`‚ö†Ô∏è [API] HTTP ${response.status} detected. Retrying in ${waitTime}ms...`);\r\n            await new Promise(resolve => setTimeout(resolve, waitTime));\r\n            return fetchAPI(endpoint, options, retries - 1, backoff);\r\n        }\r\n\r\n        if (!response.ok) {\r\n            throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        return data;\r\n    } catch (error) {\r\n        if (retries > 0) {\r\n            console.warn(`‚ö†Ô∏è [API] Fetch error, retrying (${retries} left):`, error);\r\n            await new Promise(resolve => setTimeout(resolve, backoff));\r\n            return fetchAPI(endpoint, options, retries - 1, backoff);\r\n        }\r\n        console.error('‚ùå [API] Final error fetching:', url, error);\r\n        throw error;\r\n    }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;AAGuB;AAHvB,uCAAuC;AACvC,MAAM,WAAW,+CAAkB;AACnC,MAAM,mBAAmB,sCAAW,0BAA2F;AACxH,MAAM,UAAU,kLAAO,CAAC,GAAG,CAAC,wBAAwB,IAAI;AAExD,eAAe,SAAS,QAAgB,EAAE,OAAqB,EAAE,UAAU,CAAC,EAAE,UAAU,IAAI;IAC/F,4DAA4D;IAC5D,MAAM,aAAa,SAAS,UAAU,CAAC;IACvC,IAAI,MAAM;IAEV,IAAI,CAAC,YAAY;QACb,mHAAmH;QACnH,MAAM,UAAU,QAAQ,OAAO,CAAC,OAAO;QACvC,MAAM,gBAAgB,SAAS,UAAU,CAAC,OAAO,WAAW,CAAC,CAAC,EAAE,UAAU;QAC1E,MAAM,GAAG,UAAU,eAAe;IACtC;IAEA,QAAQ,GAAG,CAAC,CAAC,mBAAmB,EAAE,IAAI,gBAAgB,EAAE,QAAQ,CAAC,CAAC;IAElE,IAAI;QACA,MAAM,WAAW,MAAM,MAAM,KAAK;YAC9B,GAAG,OAAO;YACV,SAAS;gBACL,gBAAgB;gBAChB,8BAA8B;gBAC9B,0BAA0B;gBAC1B,GAAG,SAAS,OAAO;YACvB;QACJ;QAEA,0DAA0D;QAC1D,IAAI,CAAC,SAAS,MAAM,KAAK,OAAO,SAAS,MAAM,KAAK,GAAG,KAAK,UAAU,GAAG;YACrE,MAAM,WAAW,UAAU,CAAC,IAAI,OAAO,GAAG,kCAAkC;YAC5E,QAAQ,IAAI,CAAC,CAAC,cAAc,EAAE,SAAS,MAAM,CAAC,uBAAuB,EAAE,SAAS,KAAK,CAAC;YACtF,MAAM,IAAI,QAAQ,CAAA,UAAW,WAAW,SAAS;YACjD,OAAO,SAAS,UAAU,SAAS,UAAU,GAAG;QACpD;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,MAAM,IAAI,MAAM,CAAC,KAAK,EAAE,SAAS,MAAM,CAAC,EAAE,EAAE,SAAS,UAAU,EAAE;QACrE;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,IAAI,UAAU,GAAG;YACb,QAAQ,IAAI,CAAC,CAAC,gCAAgC,EAAE,QAAQ,OAAO,CAAC,EAAE;YAClE,MAAM,IAAI,QAAQ,CAAA,UAAW,WAAW,SAAS;YACjD,OAAO,SAAS,UAAU,SAAS,UAAU,GAAG;QACpD;QACA,QAAQ,KAAK,CAAC,iCAAiC,KAAK;QACpD,MAAM;IACV;AACJ"}},
    {"offset": {"line": 3087, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/components/sports/LiveTicker.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { fetchAPI } from '@/lib/api';\r\n\r\nexport default function LiveTicker() {\r\n  const [tickerItems, setTickerItems] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    async function fetchTickerData() {\r\n      try {\r\n        // Fetch simplified data for the ticker for all major sports\r\n        const [footballData, basketballData, tennisData, baseballData, hockeyData, amFootballData] = await Promise.all([\r\n          fetchAPI('/api/football/live'),\r\n          fetchAPI('/api/basketball/live'),\r\n          fetchAPI('/api/tennis/live'),\r\n          fetchAPI('/api/baseball/live'),\r\n          fetchAPI('/api/ice-hockey/live'),\r\n          fetchAPI('/api/american-football/live')\r\n        ]);\r\n\r\n        let items: any[] = [];\r\n\r\n        if (footballData.success && Array.isArray(footballData.data)) {\r\n          items = [...items, ...footballData.data.slice(0, 5).map((e: any) => ({\r\n            id: e.id,\r\n            sport: '‚öΩ',\r\n            sportSlug: 'football',\r\n            home: e.homeTeam.name,\r\n            away: e.awayTeam.name,\r\n            score: `${e.homeScore.current}-${e.awayScore.current}`,\r\n            time: e.status?.description || 'LIVE',\r\n            isLive: true\r\n          }))];\r\n        }\r\n\r\n        if (basketballData.success && Array.isArray(basketballData.data)) {\r\n          items = [...items, ...basketballData.data.slice(0, 3).map((e: any) => ({\r\n            id: e.id,\r\n            sport: 'üèÄ',\r\n            sportSlug: 'basketball',\r\n            home: e.homeTeam.name,\r\n            away: e.awayTeam.name,\r\n            score: `${e.homeScore.current}-${e.awayScore.current}`,\r\n            time: e.status?.description || 'LIVE',\r\n            isLive: true\r\n          }))];\r\n        }\r\n\r\n        if (tennisData.success && Array.isArray(tennisData.data)) {\r\n          items = [...items, ...tennisData.data.slice(0, 3).map((e: any) => ({\r\n            id: e.id,\r\n            sport: 'üéæ',\r\n            sportSlug: 'tennis',\r\n            home: e.homeTeam.name,\r\n            away: e.awayTeam.name,\r\n            score: `${e.homeScore.current}-${e.awayScore.current}`,\r\n            time: e.status?.description || 'LIVE',\r\n            isLive: true\r\n          }))];\r\n        }\r\n\r\n        if (baseballData.success && Array.isArray(baseballData.data)) {\r\n          items = [...items, ...baseballData.data.slice(0, 3).map((e: any) => ({\r\n            id: e.id,\r\n            sport: '‚öæ',\r\n            sportSlug: 'baseball',\r\n            home: e.homeTeam.name,\r\n            away: e.awayTeam.name,\r\n            score: `${e.homeScore.current}-${e.awayScore.current}`,\r\n            time: e.status?.description || 'LIVE',\r\n            isLive: true\r\n          }))];\r\n        }\r\n\r\n        if (hockeyData.success && Array.isArray(hockeyData.data)) {\r\n          items = [...items, ...hockeyData.data.slice(0, 3).map((e: any) => ({\r\n            id: e.id,\r\n            sport: 'üèí',\r\n            sportSlug: 'nhl',\r\n            home: e.homeTeam.name,\r\n            away: e.awayTeam.name,\r\n            score: `${e.homeScore.current}-${e.awayScore.current}`,\r\n            time: e.status?.description || 'LIVE',\r\n            isLive: true\r\n          }))];\r\n        }\r\n\r\n        if (amFootballData.success && Array.isArray(amFootballData.data)) {\r\n          items = [...items, ...amFootballData.data.slice(0, 3).map((e: any) => ({\r\n            id: e.id,\r\n            sport: 'üèà',\r\n            sportSlug: 'nfl',\r\n            home: e.homeTeam.name,\r\n            away: e.awayTeam.name,\r\n            score: `${e.homeScore.current}-${e.awayScore.current}`,\r\n            time: e.status?.description || 'LIVE',\r\n            isLive: true\r\n          }))];\r\n        }\r\n\r\n        // Duplicar items para scroll infinito suave\r\n        setTickerItems([...items, ...items]);\r\n      } catch (error) {\r\n        console.error('Error fetching ticker:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    fetchTickerData();\r\n  }, []);\r\n\r\n  if (loading || tickerItems.length === 0) return null;\r\n\r\n  return (\r\n    <div className=\"w-full bg-[#050505]/80 backdrop-blur-md border-b border-white/10 overflow-hidden py-2 fixed top-16 z-40\">\r\n      <div className=\"flex whitespace-nowrap animate-scroll hover:pause\">\r\n        {tickerItems.map((item, i) => (\r\n          <Link\r\n            key={i}\r\n            href={`/match/${item.sportSlug}/${item.id}`}\r\n            className=\"flex items-center gap-4 mx-6 text-xs md:text-sm hover:bg-white/5 px-3 py-1 rounded-lg transition-colors cursor-pointer\"\r\n          >\r\n            <span className=\"font-bold text-red-500 animate-pulse flex items-center gap-1\">\r\n              <span className=\"w-1.5 h-1.5 rounded-full bg-red-500\"></span>\r\n              {item.time}\r\n            </span>\r\n            <span className=\"text-gray-300 font-medium\">\r\n              {item.sport} {item.home} <span className=\"text-white font-bold\">{item.score}</span> {item.away}\r\n            </span>\r\n            <div className=\"w-px h-3 bg-white/20 ml-2\"></div>\r\n          </Link>\r\n        ))}\r\n      </div>\r\n      <style jsx>{`\r\n        @keyframes scroll {\r\n          0% { transform: translateX(0); }\r\n          100% { transform: translateX(-50%); }\r\n        }\r\n        .animate-scroll {\r\n          animation: scroll 40s linear infinite;\r\n          display: flex;\r\n        }\r\n        .hover\\:pause:hover {\r\n            animation-play-state: paused;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3327, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/components/providers/PageTransition.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { usePathname } from 'next/navigation';\r\n\r\nexport default function PageTransition({ children }: { children: React.ReactNode }) {\r\n    const pathname = usePathname();\r\n\r\n    return (\r\n        <AnimatePresence mode=\"wait\">\r\n            <motion.div\r\n                key={pathname}\r\n                initial={{ opacity: 0, y: 10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -10 }}\r\n                transition={{ duration: 0.4, ease: \"easeOut\" }}\r\n            >\r\n                {children}\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;;;AAHA;;;AAKe,SAAS,eAAe,EAAE,QAAQ,EAAiC;;IAC9E,MAAM,WAAW,IAAA,2JAAW;IAE5B,qBACI,oMAAC,sNAAe;QAAC,MAAK;kBAClB,cAAA,oMAAC,8MAAM,CAAC,GAAG;YAEP,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAG;YAC7B,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAE;YAC5B,MAAM;gBAAE,SAAS;gBAAG,GAAG,CAAC;YAAG;YAC3B,YAAY;gBAAE,UAAU;gBAAK,MAAM;YAAU;sBAE5C;WANI;;;;;;;;;;AAUrB;GAhBwB;;QACH,2JAAW;;;KADR"}},
    {"offset": {"line": 3389, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/contexts/BettingSlipContext.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { createContext, useContext, useState, useEffect } from 'react';\r\n\r\nexport interface Bet {\r\n    id: string;\r\n    matchId: string;\r\n    selection: string; // e.g., \"Home\", \"Away\", \"Draw\", \"Over 2.5\"\r\n    odds: number;\r\n    matchLabel: string; // \"Real Madrid vs Barcelona\"\r\n    market: string; // \"Winner\", \"Goals\", etc.\r\n}\r\n\r\ninterface BettingSlipContextType {\r\n    bets: Bet[];\r\n    addToSlip: (bet: Omit<Bet, 'id'>) => void;\r\n    removeFromSlip: (id: string) => void;\r\n    clearSlip: () => void;\r\n    isOpen: boolean;\r\n    toggleSlip: () => void;\r\n}\r\n\r\nconst BettingSlipContext = createContext<BettingSlipContextType | undefined>(undefined);\r\n\r\nexport function BettingSlipProvider({ children }: { children: React.ReactNode }) {\r\n    const [bets, setBets] = useState<Bet[]>(() => {\r\n        if (typeof window !== 'undefined') {\r\n            const savedBets = localStorage.getItem('pickgenius_betslip');\r\n            if (savedBets) {\r\n                try {\r\n                    return JSON.parse(savedBets);\r\n                } catch (e) {\r\n                    console.error('Error loading bet slip', e);\r\n                }\r\n            }\r\n        }\r\n        return [];\r\n    });\r\n    const [isOpen, setIsOpen] = useState(false);\r\n\r\n    // Save to local storage on change\r\n    useEffect(() => {\r\n        localStorage.setItem('pickgenius_betslip', JSON.stringify(bets));\r\n    }, [bets]);\r\n\r\n    const addToSlip = (bet: Omit<Bet, 'id'>) => {\r\n        const newBet = { ...bet, id: Math.random().toString(36).substr(2, 9) };\r\n        // Check if already exists (optional: prevent duplicates)\r\n        const exists = bets.some(b => b.matchId === bet.matchId && b.selection === bet.selection);\r\n        if (!exists) {\r\n            setBets(prev => [...prev, newBet]);\r\n            setIsOpen(true); // Auto open when adding\r\n        }\r\n    };\r\n\r\n    const removeFromSlip = (id: string) => {\r\n        setBets(prev => prev.filter(b => b.id !== id));\r\n    };\r\n\r\n    const clearSlip = () => {\r\n        setBets([]);\r\n    };\r\n\r\n    const toggleSlip = () => {\r\n        setIsOpen(prev => !prev);\r\n    };\r\n\r\n    return (\r\n        <BettingSlipContext.Provider value={{ bets, addToSlip, removeFromSlip, clearSlip, isOpen, toggleSlip }}>\r\n            {children}\r\n        </BettingSlipContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useBettingSlip() {\r\n    const context = useContext(BettingSlipContext);\r\n    if (context === undefined) {\r\n        throw new Error('useBettingSlip must be used within a BettingSlipProvider');\r\n    }\r\n    return context;\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;;;AAFA;;AAsBA,MAAM,mCAAqB,IAAA,qLAAa,EAAqC;AAEtE,SAAS,oBAAoB,EAAE,QAAQ,EAAiC;;IAC3E,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,gLAAQ;wCAAQ;YACpC,wCAAmC;gBAC/B,MAAM,YAAY,aAAa,OAAO,CAAC;gBACvC,IAAI,WAAW;oBACX,IAAI;wBACA,OAAO,KAAK,KAAK,CAAC;oBACtB,EAAE,OAAO,GAAG;wBACR,QAAQ,KAAK,CAAC,0BAA0B;oBAC5C;gBACJ;YACJ;YACA,OAAO,EAAE;QACb;;IACA,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,gLAAQ,EAAC;IAErC,kCAAkC;IAClC,IAAA,iLAAS;yCAAC;YACN,aAAa,OAAO,CAAC,sBAAsB,KAAK,SAAS,CAAC;QAC9D;wCAAG;QAAC;KAAK;IAET,MAAM,YAAY,CAAC;QACf,MAAM,SAAS;YAAE,GAAG,GAAG;YAAE,IAAI,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,MAAM,CAAC,GAAG;QAAG;QACrE,yDAAyD;QACzD,MAAM,SAAS,KAAK,IAAI,CAAC,CAAA,IAAK,EAAE,OAAO,KAAK,IAAI,OAAO,IAAI,EAAE,SAAS,KAAK,IAAI,SAAS;QACxF,IAAI,CAAC,QAAQ;YACT,QAAQ,CAAA,OAAQ;uBAAI;oBAAM;iBAAO;YACjC,UAAU,OAAO,wBAAwB;QAC7C;IACJ;IAEA,MAAM,iBAAiB,CAAC;QACpB,QAAQ,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAC9C;IAEA,MAAM,YAAY;QACd,QAAQ,EAAE;IACd;IAEA,MAAM,aAAa;QACf,UAAU,CAAA,OAAQ,CAAC;IACvB;IAEA,qBACI,oMAAC,mBAAmB,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAW;YAAgB;YAAW;YAAQ;QAAW;kBAChG;;;;;;AAGb;GAhDgB;KAAA;AAkDT,SAAS;;IACZ,MAAM,UAAU,IAAA,kLAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACvB,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX;IANgB"}},
    {"offset": {"line": 3488, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/components/betting/BettingSlip.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useBettingSlip } from '@/contexts/BettingSlipContext';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport confetti from 'canvas-confetti';\r\nimport { toast } from 'sonner';\r\n\r\nexport default function BettingSlip() {\r\n    const { bets, removeFromSlip, clearSlip, isOpen, toggleSlip } = useBettingSlip();\r\n    const { user, saveParley } = useAuth();\r\n    const [wager, setWager] = useState<string>('10');\r\n    const [selectedHouse, setSelectedHouse] = useState<string>('betano');\r\n    const [mounted, setMounted] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setMounted(true);\r\n    }, []);\r\n\r\n    const bettingHouses = [\r\n        { id: 'betano', name: 'Betano', url: 'https://www.betano.com.co/', color: 'from-yellow-600 to-orange-600' },\r\n        { id: 'betplay', name: 'BetPlay', url: 'https://www.betplay.com.co/', color: 'from-green-600 to-emerald-600' },\r\n        { id: 'rushbet', name: 'Rushbet', url: 'https://www.rushbet.co/', color: 'from-blue-600 to-cyan-600' },\r\n        { id: 'bet365', name: 'Bet365', url: 'https://www.bet365.com/', color: 'from-green-600 to-green-700' },\r\n    ];\r\n\r\n    if (!mounted) return null;\r\n\r\n    if (!isOpen && bets.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    // Calculate totals\r\n    const totalOdds = bets.reduce((acc, bet) => acc * bet.odds, 1);\r\n    const potentialReturn = (parseFloat(wager) || 0) * totalOdds;\r\n\r\n    const handlePlaceBet = () => {\r\n        const selectedHouseData = bettingHouses.find(h => h.id === selectedHouse);\r\n\r\n        if (selectedHouseData) {\r\n            // Open betting house in new tab (preserves PickGenius session)\r\n            window.open(selectedHouseData.url, '_blank', 'noopener,noreferrer');\r\n\r\n            // Show success message\r\n            toast.success('Redirigiendo a ' + selectedHouseData.name, {\r\n                description: `Tu ticket se mantiene guardado. Ganancia Potencial: $${potentialReturn.toFixed(2)}`\r\n            });\r\n\r\n            // Trigger visual feedback\r\n            confetti({\r\n                particleCount: 100,\r\n                spread: 70,\r\n                origin: { y: 0.6 },\r\n                colors: ['#22c55e', '#ffffff', '#eab308'],\r\n                zIndex: 9999\r\n            });\r\n\r\n            // --- NEW: Save Ticket to History ---\r\n            if (user) {\r\n                saveParley({\r\n                    selections: bets,\r\n                    totalOdds,\r\n                    wager,\r\n                    potentialReturn,\r\n                    house: selectedHouseData.name,\r\n                    status: 'active'\r\n                }).catch(err => console.error('Error saving parley:', err));\r\n            }\r\n        }\r\n\r\n        // NOTE: We do NOT clear the slip automatically\r\n        // User must manually clear it with the trash button\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {/* Floating Toggle Button */}\r\n            {!isOpen && bets.length > 0 && (\r\n                <button\r\n                    onClick={toggleSlip}\r\n                    className=\"fixed bottom-6 right-6 z-[60] group mobile-haptic\"\r\n                >\r\n                    <div className=\"absolute inset-0 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full blur opacity-75 group-hover:opacity-100 transition-opacity animate-pulse\"></div>\r\n                    <div className=\"relative bg-[#0a0a0a] border border-white/20 text-white font-bold py-3 px-5 rounded-full shadow-2xl flex items-center gap-3 hover:scale-105 transition-transform active:scale-95\">\r\n                        <span className=\"text-xl\">üé´</span>\r\n                        <span className=\"font-bold\">Ticket</span>\r\n                        <span className=\"bg-gradient-to-r from-purple-500 to-blue-500 text-white text-[10px] rounded-full w-5 h-5 flex items-center justify-center font-bold\">\r\n                            {bets.length}\r\n                        </span>\r\n                    </div>\r\n                </button>\r\n            )}\r\n\r\n            {/* Slip Panel - Brutal Glass */}\r\n            {isOpen && (\r\n                <div className=\"fixed bottom-6 right-6 z-[60] w-[90vw] md:w-96 glass-brutal rounded-2xl overflow-hidden flex flex-col max-h-[80vh] animate-in slide-in-from-bottom-10 fade-in duration-300 shadow-[0_0_50px_rgba(0,0,0,0.5)]\">\r\n\r\n                    {/* Header */}\r\n                    <div className=\"bg-white/5 backdrop-blur-md p-4 flex justify-between items-center border-b border-white/10\">\r\n                        <div className=\"font-bold flex items-center gap-2 text-white\">\r\n                            <span className=\"text-xl\">üé´</span>\r\n                            <span className=\"tracking-tight\">Ticket de Apuesta</span>\r\n                            <span className=\"bg-purple-500/20 text-purple-300 text-xs px-2 py-0.5 rounded-full border border-purple-500/30\">\r\n                                {bets.length}\r\n                            </span>\r\n                        </div>\r\n                        <button\r\n                            onClick={toggleSlip}\r\n                            className=\"w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/10 text-gray-400 hover:text-white transition-colors\"\r\n                        >\r\n                            ‚úï\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Bets List */}\r\n                    <div className=\"flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar\">\r\n                        {bets.length === 0 ? (\r\n                            <div className=\"text-center py-12 flex flex-col items-center gap-3\">\r\n                                <div className=\"text-4xl opacity-20\">üìä</div>\r\n                                <div className=\"text-gray-500 text-sm font-medium\">\r\n                                    Tu ticket est√° vac√≠o.\r\n                                    <br />\r\n                                    Selecciona una cuota para jugar.\r\n                                </div>\r\n                            </div>\r\n                        ) : (\r\n                            bets.map((bet) => (\r\n                                <div key={bet.id} className=\"bg-white/5 hover:bg-white/10 border border-white/5 hover:border-white/20 rounded-xl p-4 relative group transition-all duration-200\">\r\n                                    <button\r\n                                        onClick={() => removeFromSlip(bet.id)}\r\n                                        className=\"absolute top-2 right-2 w-6 h-6 flex items-center justify-center rounded-full hover:bg-red-500/20 text-gray-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-all\"\r\n                                    >\r\n                                        ‚úï\r\n                                    </button>\r\n                                    <div className=\"text-xs font-bold text-gray-400 mb-1 uppercase tracking-wider\">{bet.matchLabel}</div>\r\n                                    <div className=\"flex justify-between items-end\">\r\n                                        <div>\r\n                                            <div className=\"font-bold text-white text-lg leading-tight\">\r\n                                                {bet.selection}\r\n                                            </div>\r\n                                            <div className=\"text-[10px] text-purple-400 mt-1 uppercase font-bold tracking-wider\">{bet.market}</div>\r\n                                        </div>\r\n                                        <div className=\"bg-purple-500/20 border border-purple-500/30 px-2 py-1 rounded text-sm font-mono font-bold text-purple-300\">\r\n                                            {bet.odds.toFixed(2)}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Footer / Calculations */}\r\n                    {bets.length > 0 && (\r\n                        <div className=\"bg-[#0a0a0a]/90 backdrop-blur-xl p-5 border-t border-white/10\">\r\n\r\n                            {/* Wager Input */}\r\n                            <div className=\"flex items-center justify-between mb-4\">\r\n                                <label className=\"text-sm font-medium text-gray-400\">Apuesta ($)</label>\r\n                                <div className=\"relative\">\r\n                                    <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500\">$</span>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        value={wager}\r\n                                        onChange={(e) => setWager(e.target.value)}\r\n                                        className=\"w-24 bg-white/5 border border-white/10 rounded-lg px-3 py-2 pl-6 text-right font-mono text-white text-sm focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Totals */}\r\n                            <div className=\"space-y-2 mb-5\">\r\n                                <div className=\"flex justify-between items-center text-sm\">\r\n                                    <span className=\"text-gray-500\">Cuota Total</span>\r\n                                    <span className=\"font-bold text-white\">{totalOdds.toFixed(2)}</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between items-center text-sm\">\r\n                                    <span className=\"text-gray-300\">Ganancia Potencial</span>\r\n                                    <span className=\"font-bold text-green-400 text-lg\">${potentialReturn.toFixed(2)}</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Betting House Selector */}\r\n                            <div className=\"mb-5\">\r\n                                <label className=\"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 block\">Casa de Apuestas</label>\r\n                                <div className=\"grid grid-cols-2 gap-2\">\r\n                                    {bettingHouses.map((house) => (\r\n                                        <button\r\n                                            key={house.id}\r\n                                            onClick={() => setSelectedHouse(house.id)}\r\n                                            className={`p-3 rounded-xl font-bold text-sm transition-all border-2 ${selectedHouse === house.id\r\n                                                ? `bg-gradient-to-r ${house.color} border-white/30 text-white scale-105`\r\n                                                : 'bg-white/5 border-white/10 text-gray-400 hover:border-white/20'\r\n                                                }`}\r\n                                        >\r\n                                            {house.name}\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Actions */}\r\n                            <div className=\"flex gap-2\">\r\n                                <button\r\n                                    onClick={clearSlip}\r\n                                    className=\"p-3 rounded-xl bg-white/5 hover:bg-red-500/10 hover:text-red-400 text-gray-400 transition-colors mobile-haptic\"\r\n                                    title=\"Limpiar Ticket\"\r\n                                >\r\n                                    üóëÔ∏è\r\n                                </button>\r\n\r\n                                <button\r\n                                    onClick={() => {\r\n                                        const slipText = [\r\n                                            \"üé´ *Ticket PickGenius*\",\r\n                                            ...bets.map(b => `‚Ä¢ ${b.selection} (@${b.odds.toFixed(2)}) - ${b.matchLabel}`),\r\n                                            `üí∞ *Cuota Total:* ${totalOdds.toFixed(2)}`,\r\n                                            `üéØ *Potencial:* $${potentialReturn.toFixed(2)}`\r\n                                        ].join(\"\\n\");\r\n\r\n                                        navigator.clipboard.writeText(slipText);\r\n                                        toast.success(\"¬°Ticket copiado al portapapeles!\", { icon: \"üìã\" });\r\n                                    }}\r\n                                    className=\"p-3 rounded-xl bg-white/5 hover:bg-blue-500/10 hover:text-blue-400 text-gray-400 transition-colors mobile-haptic\"\r\n                                    title=\"Copiar Ticket\"\r\n                                >\r\n                                    üìã\r\n                                </button>\r\n\r\n                                <button\r\n                                    className=\"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-3 rounded-xl transition-all shadow-lg shadow-green-900/20 active:scale-95 flex justify-center items-center gap-2 group mobile-haptic\"\r\n                                    onClick={handlePlaceBet}\r\n                                >\r\n                                    <span>Realizar Apuesta</span>\r\n                                    <span className=\"group-hover:translate-x-1 transition-transform\">‚Üí</span>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4039, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/components/analytics/GoogleAnalytics.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Script from 'next/script';\r\n\r\nexport default function GoogleAnalytics() {\r\n    const GA_MEASUREMENT_ID = process.env.NEXT_PUBLIC_GA_MEASUREMENT_ID;\r\n\r\n    if (!GA_MEASUREMENT_ID) {\r\n        console.warn('Google Analytics ID not found');\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Script\r\n                strategy=\"afterInteractive\"\r\n                src={`https://www.googletagmanager.com/gtag/js?id=${GA_MEASUREMENT_ID}`}\r\n            />\r\n            <Script\r\n                id=\"google-analytics\"\r\n                strategy=\"afterInteractive\"\r\n                dangerouslySetInnerHTML={{\r\n                    __html: `\r\n            window.dataLayer = window.dataLayer || [];\r\n            function gtag(){dataLayer.push(arguments);}\r\n            gtag('js', new Date());\r\n            gtag('config', '${GA_MEASUREMENT_ID}', {\r\n              page_path: window.location.pathname,\r\n            });\r\n          `,\r\n                }}\r\n            />\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;AAK8B;;AAH9B;AAFA;;;AAIe,SAAS;IACpB,MAAM,oBAAoB,kLAAO,CAAC,GAAG,CAAC,6BAA6B;IAEnE,IAAI,CAAC,mBAAmB;QACpB,QAAQ,IAAI,CAAC;QACb,OAAO;IACX;IAEA,qBACI;;0BACI,oMAAC,mJAAM;gBACH,UAAS;gBACT,KAAK,CAAC,4CAA4C,EAAE,mBAAmB;;;;;;0BAE3E,oMAAC,mJAAM;gBACH,IAAG;gBACH,UAAS;gBACT,yBAAyB;oBACrB,QAAQ,CAAC;;;;4BAID,EAAE,kBAAkB;;;UAGtC,CAAC;gBACK;;;;;;;;AAIhB;KA9BwB"}},
    {"offset": {"line": 4096, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/components/layout/MobileBottomNav.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport Link from 'next/link';\r\nimport { usePathname } from 'next/navigation';\r\nimport { Home, Zap, Bot, Trophy, User, Ticket } from 'lucide-react';\r\nimport { useBettingSlip } from '@/contexts/BettingSlipContext';\r\n\r\nexport default function MobileBottomNav() {\r\n    const pathname = usePathname();\r\n    const { bets, toggleSlip } = useBettingSlip();\r\n\r\n    const isActive = (path: string) => pathname === path;\r\n\r\n    const navItems = [\r\n        { label: 'Inicio', path: '/', icon: Home },\r\n        { label: 'En Vivo', path: '/football-live', icon: Zap },\r\n        { label: 'IA Picks', path: '/ai-picks', icon: Bot },\r\n        { label: 'Blog', path: '/blog', icon: Trophy }, // Trophy icon temporary or custom icon\r\n        { label: 'Perfil', path: '/profile', icon: User },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"fixed bottom-0 left-0 right-0 z-50 bg-[#050505]/95 backdrop-blur-lg border-t border-white/10 pb-safe md:hidden\">\r\n            <div className=\"flex items-center justify-around h-16\">\r\n                {/* Standard Links */}\r\n                {navItems.map((item) => {\r\n                    const active = isActive(item.path);\r\n                    return (\r\n                        <Link\r\n                            key={item.path}\r\n                            href={item.path}\r\n                            className={`flex flex-col items-center justify-center w-full h-full space-y-1 ${active ? 'text-green-500' : 'text-gray-500 hover:text-gray-300'\r\n                                }`}\r\n                        >\r\n                            <item.icon size={20} strokeWidth={active ? 2.5 : 2} />\r\n                            <span className=\"text-[10px] font-medium\">{item.label}</span>\r\n                        </Link>\r\n                    );\r\n                })}\r\n\r\n                {/* Ticket Button (Special) */}\r\n                <button\r\n                    onClick={toggleSlip}\r\n                    className=\"flex flex-col items-center justify-center w-full h-full space-y-1 text-gray-500 hover:text-gray-300 relative group\"\r\n                >\r\n                    <div className={`relative ${bets.length > 0 ? 'text-purple-500' : ''}`}>\r\n                        <Ticket size={20} className={bets.length > 0 ? 'animate-pulse' : ''} />\r\n                        {bets.length > 0 && (\r\n                            <span className=\"absolute -top-2 -right-2 w-4 h-4 bg-red-500 text-white text-[9px] font-black flex items-center justify-center rounded-full border border-[#050505]\">\r\n                                {bets.length}\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n                    <span className={`text-[10px] font-medium ${bets.length > 0 ? 'text-purple-500' : ''}`}>Ticket</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AANA;;;;;AAQe,SAAS;;IACpB,MAAM,WAAW,IAAA,2JAAW;IAC5B,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,IAAA,2JAAc;IAE3C,MAAM,WAAW,CAAC,OAAiB,aAAa;IAEhD,MAAM,WAAW;QACb;YAAE,OAAO;YAAU,MAAM;YAAK,MAAM,qNAAI;QAAC;QACzC;YAAE,OAAO;YAAW,MAAM;YAAkB,MAAM,iNAAG;QAAC;QACtD;YAAE,OAAO;YAAY,MAAM;YAAa,MAAM,iNAAG;QAAC;QAClD;YAAE,OAAO;YAAQ,MAAM;YAAS,MAAM,0NAAM;QAAC;QAC7C;YAAE,OAAO;YAAU,MAAM;YAAY,MAAM,oNAAI;QAAC;KACnD;IAED,qBACI,oMAAC;QAAI,WAAU;kBACX,cAAA,oMAAC;YAAI,WAAU;;gBAEV,SAAS,GAAG,CAAC,CAAC;oBACX,MAAM,SAAS,SAAS,KAAK,IAAI;oBACjC,qBACI,oMAAC,iLAAI;wBAED,MAAM,KAAK,IAAI;wBACf,WAAW,CAAC,kEAAkE,EAAE,SAAS,mBAAmB,qCACtG;;0CAEN,oMAAC,KAAK,IAAI;gCAAC,MAAM;gCAAI,aAAa,SAAS,MAAM;;;;;;0CACjD,oMAAC;gCAAK,WAAU;0CAA2B,KAAK,KAAK;;;;;;;uBANhD,KAAK,IAAI;;;;;gBAS1B;8BAGA,oMAAC;oBACG,SAAS;oBACT,WAAU;;sCAEV,oMAAC;4BAAI,WAAW,CAAC,SAAS,EAAE,KAAK,MAAM,GAAG,IAAI,oBAAoB,IAAI;;8CAClE,oMAAC,0NAAM;oCAAC,MAAM;oCAAI,WAAW,KAAK,MAAM,GAAG,IAAI,kBAAkB;;;;;;gCAChE,KAAK,MAAM,GAAG,mBACX,oMAAC;oCAAK,WAAU;8CACX,KAAK,MAAM;;;;;;;;;;;;sCAIxB,oMAAC;4BAAK,WAAW,CAAC,wBAAwB,EAAE,KAAK,MAAM,GAAG,IAAI,oBAAoB,IAAI;sCAAE;;;;;;;;;;;;;;;;;;;;;;;AAK5G;GAnDwB;;QACH,2JAAW;QACC,2JAAc;;;KAFvB"}},
    {"offset": {"line": 4254, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/components/auth/WelcomeToast.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { X, Sparkles, Gift } from 'lucide-react';\r\n\r\nexport default function WelcomeToast() {\r\n    const { user } = useAuth();\r\n    const [showToast, setShowToast] = useState(false);\r\n    const [isNewUser, setIsNewUser] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (user && user.displayName) {\r\n            // Verificar si es usuario nuevo (cuenta creada recientemente)\r\n            const currentTime = new Date().getTime();\r\n            const accountTime = new Date(user.createdAt).getTime();\r\n            const isNew = (currentTime - accountTime) < 60000;\r\n\r\n            const timer = setTimeout(() => {\r\n                setIsNewUser(isNew);\r\n                setShowToast(true);\r\n            }, 100);\r\n\r\n            // Auto-cerrar despu√©s de 5-7 segundos\r\n            const closeTimer = setTimeout(() => {\r\n                setShowToast(false);\r\n            }, isNew ? 7000 : 5000);\r\n\r\n            return () => {\r\n                clearTimeout(timer);\r\n                clearTimeout(closeTimer);\r\n            };\r\n        }\r\n    }, [user]);\r\n\r\n    if (!showToast || !user) return null;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {showToast && (\r\n                <motion.div\r\n                    initial={{ opacity: 0, y: -50, scale: 0.9 }}\r\n                    animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                    exit={{ opacity: 0, y: -20, scale: 0.9 }}\r\n                    className=\"fixed top-4 left-1/2 -translate-x-1/2 z-[9999] max-w-md w-full mx-4\"\r\n                >\r\n                    <div className=\"glass-card border border-white/10 bg-gradient-to-br from-purple-900/40 to-blue-900/40 backdrop-blur-xl p-6 rounded-3xl shadow-[0_20px_60px_rgba(0,0,0,0.5)]\">\r\n                        {/* Close button */}\r\n                        <button\r\n                            onClick={() => setShowToast(false)}\r\n                            className=\"absolute top-3 right-3 text-white/40 hover:text-white/80 transition-colors\"\r\n                        >\r\n                            <X className=\"w-4 h-4\" />\r\n                        </button>\r\n\r\n                        <div className=\"flex items-start gap-4\">\r\n                            {/* Icon */}\r\n                            <div className=\"p-2 bg-white/10 rounded-xl shrink-0\">\r\n                                {isNewUser ? (\r\n                                    <Sparkles className=\"w-6 h-6 text-yellow-400\" />\r\n                                ) : (\r\n                                    <Gift className=\"w-6 h-6 text-emerald-400\" />\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Content */}\r\n                            <div className=\"flex-1 pt-1\">\r\n                                <h3 className=\"font-black text-lg mb-1\">\r\n                                    {isNewUser ? (\r\n                                        <>\r\n                                            ¬°Bienvenido, <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-blue-400\">{user.displayName}</span>! üéâ\r\n                                        </>\r\n                                    ) : (\r\n                                        <>\r\n                                            ¬°Hola de nuevo, <span className=\"text-emerald-400\">{user.displayName}</span>! üëã\r\n                                        </>\r\n                                    )}\r\n                                </h3>\r\n\r\n                                {isNewUser && (\r\n                                    <div className=\"space-y-2\">\r\n                                        <p className=\"text-xs text-white/70 font-bold\">\r\n                                            Tu cuenta ha sido creada exitosamente\r\n                                        </p>\r\n                                        <div className=\"flex items-center gap-2 bg-emerald-500/10 border border-emerald-500/20 rounded-lg px-3 py-2\">\r\n                                            <Gift className=\"w-4 h-4 text-emerald-400\" />\r\n                                            <span className=\"text-xs font-black text-emerald-400\">\r\n                                                Tienes 15 d√≠as de Premium GRATIS\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {!isNewUser && (\r\n                                    <p className=\"text-xs text-white/60 font-semibold\">\r\n                                        {user.isPremium ? '‚ú® Cuenta Premium activa' : 'üéØ Listo para analizar'}\r\n                                    </p>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Progress bar */}\r\n                        <motion.div\r\n                            initial={{ width: '100%' }}\r\n                            animate={{ width: '0%' }}\r\n                            transition={{ duration: isNewUser ? 6 : 4, ease: 'linear' }}\r\n                            className=\"absolute bottom-0 left-0 h-1 bg-gradient-to-r from-purple-500 to-blue-500 rounded-b-3xl\"\r\n                        />\r\n                    </div>\r\n                </motion.div>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AAAA;AAAA;;;AALA;;;;;AAOe,SAAS;;IACpB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,6IAAO;IACxB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,gLAAQ,EAAC;IAC3C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,gLAAQ,EAAC;IAE3C,IAAA,iLAAS;kCAAC;YACN,IAAI,QAAQ,KAAK,WAAW,EAAE;gBAC1B,8DAA8D;gBAC9D,MAAM,cAAc,IAAI,OAAO,OAAO;gBACtC,MAAM,cAAc,IAAI,KAAK,KAAK,SAAS,EAAE,OAAO;gBACpD,MAAM,QAAQ,AAAC,cAAc,cAAe;gBAE5C,MAAM,QAAQ;oDAAW;wBACrB,aAAa;wBACb,aAAa;oBACjB;mDAAG;gBAEH,sCAAsC;gBACtC,MAAM,aAAa;yDAAW;wBAC1B,aAAa;oBACjB;wDAAG,QAAQ,OAAO;gBAElB;8CAAO;wBACH,aAAa;wBACb,aAAa;oBACjB;;YACJ;QACJ;iCAAG;QAAC;KAAK;IAET,IAAI,CAAC,aAAa,CAAC,MAAM,OAAO;IAEhC,qBACI,oMAAC,sNAAe;kBACX,2BACG,oMAAC,8MAAM,CAAC,GAAG;YACP,SAAS;gBAAE,SAAS;gBAAG,GAAG,CAAC;gBAAI,OAAO;YAAI;YAC1C,SAAS;gBAAE,SAAS;gBAAG,GAAG;gBAAG,OAAO;YAAE;YACtC,MAAM;gBAAE,SAAS;gBAAG,GAAG,CAAC;gBAAI,OAAO;YAAI;YACvC,WAAU;sBAEV,cAAA,oMAAC;gBAAI,WAAU;;kCAEX,oMAAC;wBACG,SAAS,IAAM,aAAa;wBAC5B,WAAU;kCAEV,cAAA,oMAAC,2MAAC;4BAAC,WAAU;;;;;;;;;;;kCAGjB,oMAAC;wBAAI,WAAU;;0CAEX,oMAAC;gCAAI,WAAU;0CACV,0BACG,oMAAC,gOAAQ;oCAAC,WAAU;;;;;yDAEpB,oMAAC,oNAAI;oCAAC,WAAU;;;;;;;;;;;0CAKxB,oMAAC;gCAAI,WAAU;;kDACX,oMAAC;wCAAG,WAAU;kDACT,0BACG;;gDAAE;8DACe,oMAAC;oDAAK,WAAU;8DAA8E,KAAK,WAAW;;;;;;gDAAQ;;yEAGvI;;gDAAE;8DACkB,oMAAC;oDAAK,WAAU;8DAAoB,KAAK,WAAW;;;;;;gDAAQ;;;;;;;;oCAKvF,2BACG,oMAAC;wCAAI,WAAU;;0DACX,oMAAC;gDAAE,WAAU;0DAAkC;;;;;;0DAG/C,oMAAC;gDAAI,WAAU;;kEACX,oMAAC,oNAAI;wDAAC,WAAU;;;;;;kEAChB,oMAAC;wDAAK,WAAU;kEAAsC;;;;;;;;;;;;;;;;;;oCAOjE,CAAC,2BACE,oMAAC;wCAAE,WAAU;kDACR,KAAK,SAAS,GAAG,4BAA4B;;;;;;;;;;;;;;;;;;kCAO9D,oMAAC,8MAAM,CAAC,GAAG;wBACP,SAAS;4BAAE,OAAO;wBAAO;wBACzB,SAAS;4BAAE,OAAO;wBAAK;wBACvB,YAAY;4BAAE,UAAU,YAAY,IAAI;4BAAG,MAAM;wBAAS;wBAC1D,WAAU;;;;;;;;;;;;;;;;;;;;;;AAOtC;GA3GwB;;QACH,6IAAO;;;KADJ"}},
    {"offset": {"line": 4515, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/components/layout/PWAInstallPrompt.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { X, Share, PlusSquare, Download } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\n\r\nexport default function PWAInstallPrompt() {\r\n    const [showPrompt, setShowPrompt] = useState(false);\r\n    const [platform, setPlatform] = useState<'ios' | 'android' | 'other'>('other');\r\n\r\n    useEffect(() => {\r\n        // 1. Check if already installed\r\n        const isStandalone = window.matchMedia('(display-mode: standalone)').matches\r\n            || (window.navigator as any).standalone\r\n            || document.referrer.includes('android-app://');\r\n\r\n        if (isStandalone) return;\r\n\r\n        // 2. Detect Platform\r\n        const userAgent = window.navigator.userAgent.toLowerCase();\r\n        const isIOS = /iphone|ipad|ipod/.test(userAgent);\r\n        const isAndroid = /android/.test(userAgent);\r\n\r\n        if (isIOS) setPlatform('ios');\r\n        else if (isAndroid) setPlatform('android');\r\n\r\n        // 3. Show prompt after a delay (don't annoy immediately)\r\n        const timer = setTimeout(() => {\r\n            const hasSeenPrompt = localStorage.getItem('pwa_prompt_seen');\r\n            if (!hasSeenPrompt) {\r\n                setShowPrompt(true);\r\n            }\r\n        }, 5000);\r\n\r\n        return () => clearTimeout(timer);\r\n    }, []);\r\n\r\n    const handleClose = () => {\r\n        setShowPrompt(false);\r\n        localStorage.setItem('pwa_prompt_seen', 'true');\r\n    };\r\n\r\n    if (!showPrompt) return null;\r\n\r\n    return (\r\n        <div className=\"fixed bottom-20 left-4 right-4 z-[100] animate-in fade-in slide-in-from-bottom-10 duration-500\">\r\n            <div className=\"glass-card bg-black/90 border border-purple-500/30 p-5 rounded-[2rem] shadow-2xl relative overflow-hidden group\">\r\n                <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-purple-500 to-transparent opacity-50\" />\r\n\r\n                <button\r\n                    onClick={handleClose}\r\n                    className=\"absolute top-3 right-3 text-gray-500 hover:text-white transition-colors\"\r\n                >\r\n                    <X className=\"w-5 h-5\" />\r\n                </button>\r\n\r\n                <div className=\"flex items-center gap-4 mb-4\">\r\n                    <div className=\"w-12 h-12 rounded-2xl bg-gradient-to-br from-purple-600 to-blue-600 flex items-center justify-center shadow-lg shadow-purple-500/20\">\r\n                        <img src=\"/icon-192.png\" alt=\"PickGenius\" className=\"w-8 h-8 object-contain\" />\r\n                    </div>\r\n                    <div>\r\n                        <h3 className=\"text-white font-black text-sm\">Instalar PickGenius Pro</h3>\r\n                        <p className=\"text-gray-400 text-[10px] uppercase tracking-tighter\">Acceso r√°pido desde tu pantalla de inicio</p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-3\">\r\n                    {platform === 'ios' ? (\r\n                        <div className=\"bg-white/5 p-3 rounded-xl border border-white/5 text-[11px] text-gray-300\">\r\n                            <p className=\"flex items-center gap-2 mb-2\">\r\n                                1. Toca el bot√≥n <Share className=\"w-4 h-4 text-blue-400\" /> \"Compartir\" en Safari.\r\n                            </p>\r\n                            <p className=\"flex items-center gap-2\">\r\n                                2. Desliza y elige <PlusSquare className=\"w-4 h-4 text-gray-300\" /> \"A√±adir a pantalla de inicio\".\r\n                            </p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"bg-white/5 p-3 rounded-xl border border-white/5 text-[11px] text-gray-300\">\r\n                            <p className=\"flex items-center gap-2 mb-2\">\r\n                                Toca los tres puntos <span className=\"font-bold text-white\">‚ãÆ</span> y selecciona\r\n                            </p>\r\n                            <p className=\"flex items-center gap-2 font-bold text-white uppercase tracking-widest text-[9px]\">\r\n                                <Download className=\"w-4 h-4 text-green-400\" /> Instalar Aplicaci√≥n\r\n                            </p>\r\n                        </div>\r\n                    )}\r\n\r\n                    <button\r\n                        onClick={handleClose}\r\n                        className=\"w-full py-2.5 rounded-xl bg-gradient-to-r from-purple-600 to-blue-600 text-white text-[10px] font-black uppercase tracking-widest hover:scale-[1.02] transition-all shadow-lg shadow-purple-500/10\"\r\n                    >\r\n                        Entendido\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;;;AAHA;;;AAMe,SAAS;;IACpB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,gLAAQ,EAAC;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,gLAAQ,EAA8B;IAEtE,IAAA,iLAAS;sCAAC;YACN,gCAAgC;YAChC,MAAM,eAAe,OAAO,UAAU,CAAC,8BAA8B,OAAO,IACrE,AAAC,OAAO,SAAS,CAAS,UAAU,IACpC,SAAS,QAAQ,CAAC,QAAQ,CAAC;YAElC,IAAI,cAAc;YAElB,qBAAqB;YACrB,MAAM,YAAY,OAAO,SAAS,CAAC,SAAS,CAAC,WAAW;YACxD,MAAM,QAAQ,mBAAmB,IAAI,CAAC;YACtC,MAAM,YAAY,UAAU,IAAI,CAAC;YAEjC,IAAI,OAAO,YAAY;iBAClB,IAAI,WAAW,YAAY;YAEhC,yDAAyD;YACzD,MAAM,QAAQ;oDAAW;oBACrB,MAAM,gBAAgB,aAAa,OAAO,CAAC;oBAC3C,IAAI,CAAC,eAAe;wBAChB,cAAc;oBAClB;gBACJ;mDAAG;YAEH;8CAAO,IAAM,aAAa;;QAC9B;qCAAG,EAAE;IAEL,MAAM,cAAc;QAChB,cAAc;QACd,aAAa,OAAO,CAAC,mBAAmB;IAC5C;IAEA,IAAI,CAAC,YAAY,OAAO;IAExB,qBACI,oMAAC;QAAI,WAAU;kBACX,cAAA,oMAAC;YAAI,WAAU;;8BACX,oMAAC;oBAAI,WAAU;;;;;;8BAEf,oMAAC;oBACG,SAAS;oBACT,WAAU;8BAEV,cAAA,oMAAC,2MAAC;wBAAC,WAAU;;;;;;;;;;;8BAGjB,oMAAC;oBAAI,WAAU;;sCACX,oMAAC;4BAAI,WAAU;sCACX,cAAA,oMAAC;gCAAI,KAAI;gCAAgB,KAAI;gCAAa,WAAU;;;;;;;;;;;sCAExD,oMAAC;;8CACG,oMAAC;oCAAG,WAAU;8CAAgC;;;;;;8CAC9C,oMAAC;oCAAE,WAAU;8CAAuD;;;;;;;;;;;;;;;;;;8BAI5E,oMAAC;oBAAI,WAAU;;wBACV,aAAa,sBACV,oMAAC;4BAAI,WAAU;;8CACX,oMAAC;oCAAE,WAAU;;wCAA+B;sDACvB,oMAAC,uNAAK;4CAAC,WAAU;;;;;;wCAA0B;;;;;;;8CAEhE,oMAAC;oCAAE,WAAU;;wCAA0B;sDAChB,oMAAC,0OAAU;4CAAC,WAAU;;;;;;wCAA0B;;;;;;;;;;;;iDAI3E,oMAAC;4BAAI,WAAU;;8CACX,oMAAC;oCAAE,WAAU;;wCAA+B;sDACnB,oMAAC;4CAAK,WAAU;sDAAuB;;;;;;wCAAQ;;;;;;;8CAExE,oMAAC;oCAAE,WAAU;;sDACT,oMAAC,gOAAQ;4CAAC,WAAU;;;;;;wCAA2B;;;;;;;;;;;;;sCAK3D,oMAAC;4BACG,SAAS;4BACT,WAAU;sCACb;;;;;;;;;;;;;;;;;;;;;;;AAOrB;GA3FwB;KAAA"}}]
}