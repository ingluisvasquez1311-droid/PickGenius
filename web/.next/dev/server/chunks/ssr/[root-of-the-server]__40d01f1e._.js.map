{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/components/sports/MatchLiveView.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/web/components/sports/MatchLiveView.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/web/components/sports/MatchLiveView.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,+QAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA2S,GACxU,yEACA","ignoreList":[0]}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/components/sports/MatchLiveView.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/web/components/sports/MatchLiveView.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/web/components/sports/MatchLiveView.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,+QAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAuR,GACpT,qDACA","ignoreList":[0]}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/lib/api.ts"],"sourcesContent":["// Configuraci√≥n centralizada de la API\r\nconst isServer = typeof window === 'undefined';\r\nconst DEFAULT_BASE_URL = isServer ? (process.env.VERCEL_URL ? `https://${process.env.VERCEL_URL}` : 'http://localhost:3000') : '';\r\nexport const API_URL = process.env.NEXT_PUBLIC_API_BASE_URL || DEFAULT_BASE_URL;\r\n\r\nexport async function fetchAPI(endpoint: string, options?: RequestInit, retries = 3, backoff = 1000) {\r\n    // Ensure endpoint starts with / if it's not an absolute URL\r\n    const isAbsolute = endpoint.startsWith('http');\r\n    let url = endpoint;\r\n\r\n    if (!isAbsolute) {\r\n        // En el servidor, necesitamos URLs absolutas. En el cliente, las relativas funcionan (pero las absolutas tambi√©n).\r\n        const baseUrl = API_URL.replace(/\\/$/, '');\r\n        const cleanEndpoint = endpoint.startsWith('/') ? endpoint : `/${endpoint}`;\r\n        url = `${baseUrl}${cleanEndpoint}`;\r\n    }\r\n\r\n    console.log(`üîç [API] Fetching: ${url} (Retries left: ${retries})`);\r\n\r\n    try {\r\n        const response = await fetch(url, {\r\n            ...options,\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'ngrok-skip-browser-warning': 'true',\r\n                'bypass-tunnel-reminder': 'true',\r\n                ...options?.headers,\r\n            },\r\n        });\r\n\r\n        // Handle Rate Limiting (429) or Service Unavailable (503)\r\n        if ((response.status === 429 || response.status === 503) && retries > 0) {\r\n            const waitTime = backoff * (4 - retries); // Exponential backoff: 1s, 2s, 3s\r\n            console.warn(`‚ö†Ô∏è [API] HTTP ${response.status} detected. Retrying in ${waitTime}ms...`);\r\n            await new Promise(resolve => setTimeout(resolve, waitTime));\r\n            return fetchAPI(endpoint, options, retries - 1, backoff);\r\n        }\r\n\r\n        if (!response.ok) {\r\n            throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n        }\r\n\r\n        const data = await response.json();\r\n        return data;\r\n    } catch (error) {\r\n        if (retries > 0) {\r\n            console.warn(`‚ö†Ô∏è [API] Fetch error, retrying (${retries} left):`, error);\r\n            await new Promise(resolve => setTimeout(resolve, backoff));\r\n            return fetchAPI(endpoint, options, retries - 1, backoff);\r\n        }\r\n        console.error('‚ùå [API] Final error fetching:', url, error);\r\n        throw error;\r\n    }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;AAAA,uCAAuC;AACvC,MAAM,WAAW,kDAAkB;AACnC,MAAM,mBAAmB,uCAAY,QAAQ,GAAG,CAAC,UAAU,GAAG,CAAC,QAAQ,EAAE,QAAQ,GAAG,CAAC,UAAU,EAAE,GAAG,0BAA2B;AACxH,MAAM,UAAU,QAAQ,GAAG,CAAC,wBAAwB,IAAI;AAExD,eAAe,SAAS,QAAgB,EAAE,OAAqB,EAAE,UAAU,CAAC,EAAE,UAAU,IAAI;IAC/F,4DAA4D;IAC5D,MAAM,aAAa,SAAS,UAAU,CAAC;IACvC,IAAI,MAAM;IAEV,IAAI,CAAC,YAAY;QACb,mHAAmH;QACnH,MAAM,UAAU,QAAQ,OAAO,CAAC,OAAO;QACvC,MAAM,gBAAgB,SAAS,UAAU,CAAC,OAAO,WAAW,CAAC,CAAC,EAAE,UAAU;QAC1E,MAAM,GAAG,UAAU,eAAe;IACtC;IAEA,QAAQ,GAAG,CAAC,CAAC,mBAAmB,EAAE,IAAI,gBAAgB,EAAE,QAAQ,CAAC,CAAC;IAElE,IAAI;QACA,MAAM,WAAW,MAAM,MAAM,KAAK;YAC9B,GAAG,OAAO;YACV,SAAS;gBACL,gBAAgB;gBAChB,8BAA8B;gBAC9B,0BAA0B;gBAC1B,GAAG,SAAS,OAAO;YACvB;QACJ;QAEA,0DAA0D;QAC1D,IAAI,CAAC,SAAS,MAAM,KAAK,OAAO,SAAS,MAAM,KAAK,GAAG,KAAK,UAAU,GAAG;YACrE,MAAM,WAAW,UAAU,CAAC,IAAI,OAAO,GAAG,kCAAkC;YAC5E,QAAQ,IAAI,CAAC,CAAC,cAAc,EAAE,SAAS,MAAM,CAAC,uBAAuB,EAAE,SAAS,KAAK,CAAC;YACtF,MAAM,IAAI,QAAQ,CAAA,UAAW,WAAW,SAAS;YACjD,OAAO,SAAS,UAAU,SAAS,UAAU,GAAG;QACpD;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,MAAM,IAAI,MAAM,CAAC,KAAK,EAAE,SAAS,MAAM,CAAC,EAAE,EAAE,SAAS,UAAU,EAAE;QACrE;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,IAAI,UAAU,GAAG;YACb,QAAQ,IAAI,CAAC,CAAC,gCAAgC,EAAE,QAAQ,OAAO,CAAC,EAAE;YAClE,MAAM,IAAI,QAAQ,CAAA,UAAW,WAAW,SAAS;YACjD,OAAO,SAAS,UAAU,SAAS,UAAU,GAAG;QACpD;QACA,QAAQ,KAAK,CAAC,iCAAiC,KAAK;QACpD,MAAM;IACV;AACJ"}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/lib/services/sportsDataService.ts"],"sourcesContent":["// Determinar la URL base dependiendo del entorno (Servidor vs Cliente)\r\n// Si estamos en el servidor, usamos la API directa.\r\n// Si estamos en el cliente, usamos nuestro Proxy para evitar CORS.\r\n// La URL del Bridge (Tu IP casera) es obligatoria para NO ser bloqueados\r\nconst BRIDGE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001';\r\n\r\nconst BASE_URL = typeof window === 'undefined'\r\n    ? `${BRIDGE_URL}/api/proxy/sportsdata` // En el servidor, USAMOS EL PUENTE (Tu IP) siempre\r\n    : '/api/proxy/sportsdata'; // En el cliente, usamos el proxy local del navegador\r\n\r\nimport { logApiCall } from '@/lib/adminService';\r\nimport axios from 'axios';\r\nimport { fetchAPI } from '../api';\r\n\r\nexport interface SportsDataTeam {\r\n    id: number;\r\n    name: string;\r\n    shortName: string;\r\n    slug: string;\r\n    nameCode: string;\r\n    teamColors: {\r\n        primary: string;\r\n        secondary: string;\r\n        text: string;\r\n    };\r\n}\r\n\r\nexport interface SportsDataEvent {\r\n    id: number;\r\n    slug: string;\r\n    tournament: {\r\n        id: number;\r\n        name: string;\r\n        slug: string;\r\n        uniqueTournament?: {\r\n            id: number;\r\n            name: string;\r\n            primaryColorHex?: string;\r\n            secondaryColorHex?: string;\r\n        };\r\n        category: {\r\n            id: number;\r\n            name: string;\r\n            slug: string;\r\n            sport: {\r\n                id: number;\r\n                name: string;\r\n                slug: string;\r\n            };\r\n        };\r\n    };\r\n    season?: {\r\n        id: number;\r\n        name: string;\r\n        year: string;\r\n    };\r\n    homeTeam: SportsDataTeam;\r\n    awayTeam: SportsDataTeam;\r\n    homeScore: {\r\n        current: number;\r\n        display: number;\r\n        period1?: number;\r\n        period2?: number;\r\n        period3?: number;\r\n        period4?: number;\r\n        normaltime?: number;\r\n    };\r\n    awayScore: {\r\n        current: number;\r\n        display: number;\r\n        period1?: number;\r\n        period2?: number;\r\n        period3?: number;\r\n        period4?: number;\r\n        normaltime?: number;\r\n    };\r\n    status: {\r\n        code: number;\r\n        description: string;\r\n        type: 'notstarted' | 'inprogress' | 'finished' | 'scheduled' | 'canceled' | 'postponed';\r\n    };\r\n    lastPeriod?: string;\r\n    time?: {\r\n        currentPeriodStartTimestamp?: number;\r\n        initial?: number;\r\n        max?: number;\r\n        played?: number;\r\n        periodLength?: number;\r\n        overtimeLength?: number;\r\n    };\r\n    startTimestamp: number;\r\n    customId?: string;\r\n    roundInfo?: {\r\n        round: number;\r\n        name?: string;\r\n    };\r\n}\r\n\r\nexport interface SportsDataResponse {\r\n    events: SportsDataEvent[];\r\n}\r\n\r\n/**\r\n * Servicio para obtener datos deportivos\r\n */\r\nclass SportsDataService {\r\n    private headers = {\r\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36',\r\n    };\r\n\r\n    /**\r\n     * Generic method to make requests\r\n     * Using fetchAPI for centralized URL and error handling\r\n     */\r\n    async makeRequest<T = any>(endpoint: string): Promise<T | null> {\r\n        try {\r\n            const cleanEndpoint = endpoint.startsWith(\"/\") ? endpoint : `/${endpoint}`;\r\n            const proxyEndpoint = `/api/proxy/sportsdata${cleanEndpoint}`;\r\n\r\n            return await fetchAPI(proxyEndpoint, {\r\n                headers: this.headers\r\n            });\r\n        } catch (error: any) {\r\n            // Silence 404s as they are often expected (e.g., no momentum or no lineups for small leagues)\r\n            const errorMsg = error.message || '';\r\n            const is404 = errorMsg.includes('404') || error.status === 404 || error.response?.status === 404;\r\n\r\n            if (!is404) {\r\n                console.error(`‚ùå [SportsDataService] Request failed for ${endpoint}:`, errorMsg);\r\n            } else {\r\n                // console.warn(`[SportsDataService] Data not found (404) for ${endpoint} - This is often expected.`);\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Obtiene partidos de f√∫tbol en vivo\r\n     */\r\n    /**\r\n     * Obtiene partidos de f√∫tbol en vivo\r\n     */\r\n    async getLiveFootballMatches(): Promise<SportsDataEvent[]> {\r\n        try {\r\n            // 1. Prioridad: Sofascore DIRECTO (v√≠a Bridge) para inmediatez absoluta\r\n            const data = await this.makeRequest<SportsDataResponse>('/sport/football/events/live');\r\n            if (data?.events && data.events.length > 0) return data.events;\r\n        } catch (e) {\r\n            console.warn(\"‚ö†Ô∏è Fallback to Firebase for Live Football\");\r\n        }\r\n\r\n        // 2. Fallback: Firebase (V√≠a nuestra API interna)\r\n        const res = await fetchAPI('/api/football/live', { headers: this.headers });\r\n        return res?.events || [];\r\n    }\r\n\r\n    /**\r\n     * Obtiene partidos de f√∫tbol programados para una fecha\r\n     */\r\n    async getScheduledFootballMatches(date: string): Promise<SportsDataEvent[]> {\r\n        return this.getScheduledEventsBySport('football', date);\r\n    }\r\n\r\n    /**\r\n     * Obtiene eventos programados de forma filtrada (Backend Local)\r\n     */\r\n    async getScheduledEventsBySport(sport: string, date?: string): Promise<SportsDataEvent[]> {\r\n        const today = date || new Date().toISOString().split('T')[0];\r\n\r\n        try {\r\n            // 1. Prioridad: Sofascore DIRECTO (v√≠a Bridge) - Lo que Daniel ve en su PC\r\n            const ssData = await this.makeRequest<SportsDataResponse>(`/sport/${sport}/scheduled-events/${today}`);\r\n            if (ssData?.events && ssData.events.length > 0) {\r\n                return ssData.events;\r\n            }\r\n        } catch (e) {\r\n            console.warn(`‚ö†Ô∏è SofaScore Direct failed for ${sport}, checking Firebase...`);\r\n        }\r\n\r\n        try {\r\n            // 2. Fallback: Nuestra API de Firebase\r\n            const queryParams = date ? `?date=${date}` : '';\r\n            const endpoint = `/api/${sport}/scheduled${queryParams}`;\r\n\r\n            const result = await fetchAPI(endpoint, {\r\n                headers: this.headers\r\n            });\r\n\r\n            return result.events || result.data || [];\r\n        } catch (error) {\r\n            console.error(`‚ùå [SportsDataService] Error total fetching scheduled ${sport}:`, error);\r\n            return [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Obtiene todos los partidos de f√∫tbol (en vivo + programados)\r\n     */\r\n    async getAllFootballMatches(date?: string): Promise<SportsDataEvent[]> {\r\n        const today = date || new Date().toISOString().split('T')[0];\r\n        const [liveMatches, scheduledMatches] = await Promise.all([\r\n            this.getLiveFootballMatches(),\r\n            this.getScheduledFootballMatches(today)\r\n        ]);\r\n\r\n        const allMatches = [...(liveMatches || []), ...(scheduledMatches || [])];\r\n        return allMatches.filter((match, index, self) =>\r\n            index === self.findIndex(m => m.id === match.id)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Obtiene partidos de baloncesto en vivo\r\n     */\r\n    async getLiveBasketballGames(): Promise<SportsDataEvent[]> {\r\n        try {\r\n            // 1. Prioridad: Sofascore DIRECTO\r\n            const data = await this.makeRequest<SportsDataResponse>('/sport/basketball/events/live');\r\n            if (data?.events && data.events.length > 0) return data.events;\r\n        } catch (e) {\r\n            console.warn(\"‚ö†Ô∏è Fallback to Firebase for Live Basketball\");\r\n        }\r\n\r\n        // 2. Fallback: Firebase\r\n        const res = await fetchAPI('/api/basketball/live', { headers: this.headers });\r\n        return res?.events || [];\r\n    }\r\n\r\n    /**\r\n     * Obtiene partidos de baloncesto programados para una fecha\r\n     */\r\n    async getScheduledBasketballGames(date: string): Promise<SportsDataEvent[]> {\r\n        return this.getScheduledEventsBySport('basketball', date);\r\n    }\r\n\r\n    /**\r\n     * Obtiene todos los partidos de baloncesto (en vivo + programados)\r\n     */\r\n    async getAllBasketballGames(date?: string): Promise<SportsDataEvent[]> {\r\n        const today = date || new Date().toISOString().split('T')[0];\r\n        const [liveGames, scheduledGames] = await Promise.all([\r\n            this.getLiveBasketballGames(),\r\n            this.getScheduledBasketballGames(today)\r\n        ]);\r\n\r\n        const allGames = [...(liveGames || []), ...(scheduledGames || [])];\r\n        return allGames.filter((game, index, self) =>\r\n            index === self.findIndex(g => g.id === game.id)\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Filtra partidos de baloncesto por liga\r\n     */\r\n    filterBasketballByLeague(games: SportsDataEvent[], league: 'NBA' | 'Euroleague'): SportsDataEvent[] {\r\n        return games.filter(game => {\r\n            const tournamentName = game.tournament.name.toLowerCase();\r\n            const uniqueTournamentName = game.tournament.uniqueTournament?.name.toLowerCase() || '';\r\n            if (league === 'NBA') {\r\n                return tournamentName.includes('nba') || uniqueTournamentName.includes('nba');\r\n            } else {\r\n                return tournamentName.includes('euroleague') || uniqueTournamentName.includes('euroleague');\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Obtiene un evento espec√≠fico por ID\r\n     */\r\n    async getEventById(eventId: string | number): Promise<SportsDataEvent | null> {\r\n        try {\r\n            // 1. PRIORIDAD ABSOLUTA: Sofascore DIRECTO (v√≠a Bridge)\r\n            // Esto garantiza que Momentum, Estad√≠sticas y Alineaciones est√©n disponibles AL INSTANTE\r\n            const ssData = await this.makeRequest<{ event: SportsDataEvent }>(`/event/${eventId}`);\r\n\r\n            if (ssData && ssData.event) {\r\n                const event = ssData.event;\r\n\r\n                // 2. ENRIQUECIMIENTO AS√çNCRONO: Intentar obtener cuotas/predicciones de Firebase\r\n                try {\r\n                    const firebaseRes = await fetchAPI(`/api/events/${eventId}`);\r\n                    if (firebaseRes && firebaseRes.event) {\r\n                        // Combinamos: Datos base de Sofascore + Lo que tengamos en nuestra DB (cuotas, verificaciones)\r\n                        return {\r\n                            ...event,\r\n                            ...firebaseRes.event,\r\n                            // Mantenemos los scores de Sofascore como fuente de verdad en vivo\r\n                            homeScore: event.homeScore,\r\n                            awayScore: event.awayScore,\r\n                            status: event.status,\r\n                            // Indicador de que fue enriquecido\r\n                            isEnriched: true\r\n                        };\r\n                    }\r\n                } catch (e) {\r\n                    // Si falla Firebase, devolvemos el evento puro de Sofascore sin problemas\r\n                }\r\n\r\n                return event;\r\n            }\r\n        } catch (error) {\r\n            console.error(`‚ùå [SportsDataService] Error getting event ${eventId} from Bridge:`, error);\r\n        }\r\n\r\n        // 3. FALLBACK: Si el bridge falla o el evento no existe en Sofascore, intentar solo Firebase\r\n        try {\r\n            const firebaseRes = await fetchAPI(`/api/events/${eventId}`);\r\n            return firebaseRes?.event || null;\r\n        } catch (e) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Obtiene estad√≠sticas detalladas de un evento\r\n     */\r\n    async getMatchBestPlayers(eventId: number): Promise<any> {\r\n        try {\r\n            const data = await this.makeRequest(`/event/${eventId}/best-players`);\r\n\r\n            // If data is valid and has expected structure, return it\r\n            if (data && (data.bestPlayers || data.allPlayers)) {\r\n                return data;\r\n            }\r\n\r\n            // Fallback: Try to derive best players from lineups/statistics\r\n            // console.log(`üîç [SportsData] No direct 'best-players' for ${eventId}, using lineups fallback...`);\r\n            const lineups = await this.getMatchLineups(eventId);\r\n\r\n            if (lineups && lineups.home && lineups.away) {\r\n                const mapPlayers = (players: any[] = []) => players\r\n                    .filter(p => p.statistics && (p.statistics.rating > 0 || p.statistics.points > 0))\r\n                    .sort((a, b) => (b.statistics.rating || 0) - (a.statistics.rating || 0));\r\n\r\n                const homePlayers = [...(lineups.home.players || []), ...(lineups.home.bench || [])];\r\n                const awayPlayers = [...(lineups.away.players || []), ...(lineups.away.bench || [])];\r\n\r\n                const processed = {\r\n                    allPlayers: {\r\n                        home: mapPlayers(homePlayers),\r\n                        away: mapPlayers(awayPlayers)\r\n                    },\r\n                    bestPlayers: {\r\n                        home: mapPlayers(homePlayers).slice(0, 3),\r\n                        away: mapPlayers(awayPlayers).slice(0, 3)\r\n                    },\r\n                    source: 'lineups_derived'\r\n                };\r\n                return processed;\r\n            }\r\n\r\n            return { allPlayers: { home: [], away: [] }, bestPlayers: { home: [], away: [] } };\r\n        } catch (error) {\r\n            console.error(`‚ùå [SportsData] Error getting best players for ${eventId}:`, error);\r\n            return { allPlayers: { home: [], away: [] }, bestPlayers: { home: [], away: [] } };\r\n        }\r\n    }\r\n\r\n    async getMatchMomentum(eventId: number): Promise<any> {\r\n        return await this.makeRequest(`/event/${eventId}/attack-momentum`);\r\n    }\r\n\r\n    /**\r\n     * Obtiene estad√≠sticas generales del partido (posesi√≥n, tiros, etc.)\r\n     */\r\n    async getMatchStatistics(eventId: number): Promise<any> {\r\n        return await this.makeRequest(`/event/${eventId}/statistics`);\r\n    }\r\n\r\n    /**\r\n     * Obtiene cuotas reales de mercado (Bet365, etc.) para el partido\r\n     */\r\n    async getMatchOdds(eventId: number, marketId: number = 1): Promise<any> {\r\n        try {\r\n            const data = await this.makeRequest(`/event/${eventId}/odds/${marketId}/all`);\r\n            // The makeRequest already handles errors and returns null for failed requests.\r\n            // We just need to check if the data is null or empty, which might indicate a 404 or no data.\r\n            if (!data || Object.keys(data).length === 0) {\r\n                console.warn(`[SportsData] Odds not available (or empty response) for event ${eventId}, market ${marketId}`);\r\n                return null;\r\n            }\r\n            return data;\r\n        } catch (error) {\r\n            console.error(`[SportsData] Error fetching odds for ${eventId}:`, error);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Intenta extraer la l√≠nea principal de Over/Under (Totales) de un evento\r\n     */\r\n    async getMatchTotalLine(eventId: number, sport: string): Promise<{ line: number; provider: string } | null> {\r\n        try {\r\n            const odds = await this.getMatchOdds(eventId);\r\n            if (!odds || !odds.markets) return null;\r\n\r\n            // Diferentes nombres de mercado seg√∫n el deporte\r\n            const marketKeywords = sport === 'football' ? ['total goals', 'over/under'] : ['total points', 'over/under', 'total'];\r\n\r\n            const market = odds.markets.find((m: any) =>\r\n                marketKeywords.some(key => m.marketName.toLowerCase().includes(key))\r\n            );\r\n\r\n            if (market && market.choices && market.choices.length > 0) {\r\n                const choice = market.choices[0];\r\n                const lineMatch = choice.name.match(/(\\d+\\.?\\d*)/);\r\n                if (lineMatch) {\r\n                    return {\r\n                        line: parseFloat(lineMatch[1]),\r\n                        provider: 'Betplay'\r\n                    };\r\n                }\r\n            }\r\n            return null;\r\n        } catch (error) {\r\n            console.error(`Error al extraer l√≠nea total para ${eventId}:`, error);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Obtiene alineaciones y estad√≠sticas de jugadores del partido\r\n     */\r\n    async getMatchLineups(eventId: number): Promise<any> {\r\n        return await this.makeRequest(`/event/${eventId}/lineups`);\r\n    }\r\n\r\n    /**\r\n     * Obtiene los jugadores de un equipo (plantilla)\r\n     */\r\n    async getTeamPlayers(teamId: number): Promise<any> {\r\n        return await this.makeRequest(`/team/${teamId}/players`);\r\n    }\r\n\r\n    /**\r\n     * Obtiene los √∫ltimos partidos de un equipo\r\n     */\r\n    async getTeamLastResults(teamId: number, sport: string = 'football'): Promise<any[]> {\r\n        const data = await this.makeRequest(`/team/${teamId}/events/last/0`);\r\n        return data?.events || [];\r\n    }\r\n\r\n    /**\r\n     * Obtiene el historial de enfrentamientos directos (H2H)\r\n     */\r\n    async getMatchH2H(eventId: number): Promise<any> {\r\n        return await this.makeRequest(`/event/${eventId}/h2h`);\r\n    }\r\n\r\n    /**\r\n     * Obtiene estad√≠sticas detalladas de un jugador en un partido espec√≠fico\r\n     */\r\n    async getPlayerEventStatistics(playerId: number, eventId: number): Promise<any> {\r\n        return await this.makeRequest(`/event/${eventId}/player/${playerId}/statistics`);\r\n    }\r\n\r\n    /**\r\n     * Obtiene los √∫ltimos eventos de un jugador\r\n     */\r\n    async getPlayerLastEvents(playerId: number): Promise<any> {\r\n        return await this.makeRequest(`/player/${playerId}/events/last/0`);\r\n    }\r\n\r\n    /**\r\n     * Obtiene estad√≠sticas de un jugador para una temporada\r\n     */\r\n    async getPlayerSeasonStats(playerId: number, tournamentId: number, seasonId: number): Promise<any> {\r\n        try {\r\n            // Priority 1: Regular Season (Most common for NBA/leagues)\r\n            const regularRes = await this.makeRequest(`/player/${playerId}/unique-tournament/${tournamentId}/season/${seasonId}/statistics/regularSeason`);\r\n            if (regularRes && regularRes.statistics) return regularRes;\r\n        } catch (e) {\r\n            // Ignore 404s on regularSeason\r\n        }\r\n\r\n        try {\r\n            // Priority 2: Overall (Fallback)\r\n            const overallRes = await this.makeRequest(`/player/${playerId}/unique-tournament/${tournamentId}/season/${seasonId}/statistics/overall`);\r\n            if (overallRes && overallRes.statistics) return overallRes;\r\n        } catch (e) {\r\n            console.warn(`[SportsData] No season stats found for player ${playerId}`);\r\n        }\r\n\r\n        return { statistics: {} };\r\n    }\r\n\r\n    /**\r\n     * Obtiene eventos para un deporte espec√≠fico (en vivo + programados)\r\n     * FILTERS OUT finished matches older than 2 hours\r\n     * FILTERS OUT upcoming matches starting more than 12 hours from now\r\n     */\r\n    async getEventsBySport(sport: string, date?: string): Promise<SportsDataEvent[]> {\r\n        const today = date || new Date().toISOString().split('T')[0];\r\n        const tomorrow = new Date(new Date(today).getTime() + 86400000).toISOString().split('T')[0];\r\n\r\n        // 1. Obtener datos REAL-TIME directamente de Sofascore (v√≠a Bridge)\r\n        const [liveFromBridge, scheduledToday, scheduledTomorrow] = await Promise.all([\r\n            this.makeRequest<SportsDataResponse>(`/sport/${sport}/events/live`).catch(() => null),\r\n            this.getScheduledEventsBySport(sport, today),\r\n            this.getScheduledEventsBySport(sport, tomorrow)\r\n        ]);\r\n\r\n        const liveEvents = liveFromBridge?.events || [];\r\n        const liveIds = new Set(liveEvents.map((e: any) => e.id));\r\n\r\n        // Filter out matches that are already LIVE from the scheduled lists\r\n        const cleanToday = (Array.isArray(scheduledToday) ? scheduledToday : [])\r\n            .filter(e => !liveIds.has(e.id));\r\n\r\n        const cleanTomorrow = (Array.isArray(scheduledTomorrow) ? scheduledTomorrow : [])\r\n            .filter(e => !liveIds.has(e.id));\r\n\r\n        const allEvents = [\r\n            ...liveEvents,\r\n            ...cleanToday,\r\n            ...cleanTomorrow\r\n        ];\r\n\r\n        // Final deduplication (just in case there's overlap between today and tomorrow or live)\r\n        const uniqueEvents = allEvents.filter((event, index, self) =>\r\n            index === self.findIndex(e => e.id === event.id)\r\n        );\r\n\r\n        // Filter out old finished matches (older than 12 hours) AND future matches (more than 24 hours away)\r\n        const now = Date.now() / 1000;\r\n        const twelveHoursAgo = now - (12 * 60 * 60);\r\n        const twentyFourHoursFromNow = now + (24 * 60 * 60);\r\n\r\n        const recentEvents = uniqueEvents.filter((event) => {\r\n            if (event.status?.type === 'finished') {\r\n                return event.startTimestamp > twelveHoursAgo;\r\n            }\r\n\r\n            if (event.status?.type === 'notstarted' || event.status?.type === 'scheduled') {\r\n                return event.startTimestamp <= twentyFourHoursFromNow;\r\n            }\r\n\r\n            return true;\r\n        });\r\n\r\n        console.log(`üìä [${sport.toUpperCase()}] Filtered ${uniqueEvents.length} events ‚Üí ${recentEvents.length} (deduplicated and windowed)`);\r\n\r\n        return recentEvents;\r\n    }\r\n}\r\n\r\nexport const sportsDataService = new SportsDataService();\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 527, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/app/match/%5Bsport%5D/%5BeventId%5D/page.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Metadata } from 'next';\r\nimport MatchLiveView from '@/components/sports/MatchLiveView';\r\nimport { sportsDataService } from '@/lib/services/sportsDataService';\r\n\r\ninterface PageProps {\r\n    params: Promise<{\r\n        sport: string;\r\n        eventId: string;\r\n    }>;\r\n}\r\n\r\n// 1. Dynamic SEO Metadata Generation\r\nexport async function generateMetadata({ params }: PageProps): Promise<Metadata> {\r\n    const { sport, eventId } = await params;\r\n\r\n    try {\r\n        // Fetch basic event info for SEO\r\n        const response = await sportsDataService.makeRequest(`/event/${eventId}`);\r\n        const event = response?.event;\r\n\r\n        if (event) {\r\n            const home = event.homeTeam?.name || 'Home';\r\n            const away = event.awayTeam?.name || 'Away';\r\n            const tournament = event.tournament?.name || 'Sports';\r\n\r\n            return {\r\n                title: `${home} vs ${away} - Predicci√≥n y Estad√≠sticas | PickGenius`,\r\n                description: `An√°lisis en vivo, probabilidades de IA y estad√≠sticas detalladas para el partido ${home} vs ${away} en ${tournament}.`,\r\n                openGraph: {\r\n                    title: `${home} vs ${away} - An√°lisis PickGenius`,\r\n                    description: `Mira la predicci√≥n de la IA y stats en vivo.`,\r\n                    images: ['/og-image.jpg'] // We could eventually generate dynamic OGs too\r\n                }\r\n            };\r\n        }\r\n    } catch (e) {\r\n        console.error('Error generating metadata for match:', e);\r\n    }\r\n\r\n    return {\r\n        title: 'An√°lisis de Partido | PickGenius',\r\n        description: 'Detalles del evento deportivo y predicciones de IA.'\r\n    };\r\n}\r\n\r\n// 2. Server Component Entry Point\r\nexport default async function UniversalMatchPage({ params }: PageProps) {\r\n    const { sport, eventId } = await params;\r\n\r\n    // Map sport names if necessary (normalize to internal IDs)\r\n    const s = sport.toLowerCase();\r\n    const mappedSport =\r\n        s === 'nba' ? 'basketball' :\r\n            s === 'mlb' ? 'baseball' :\r\n                s === 'nhl' ? 'ice-hockey' :\r\n                    s === 'nfl' ? 'american-football' :\r\n                        s === 'hockey' ? 'ice-hockey' : sport;\r\n\r\n    return <MatchLiveView sport={mappedSport} eventId={eventId} />;\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;;;;AAUO,eAAe,iBAAiB,EAAE,MAAM,EAAa;IACxD,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,MAAM;IAEjC,IAAI;QACA,iCAAiC;QACjC,MAAM,WAAW,MAAM,gKAAiB,CAAC,WAAW,CAAC,CAAC,OAAO,EAAE,SAAS;QACxE,MAAM,QAAQ,UAAU;QAExB,IAAI,OAAO;YACP,MAAM,OAAO,MAAM,QAAQ,EAAE,QAAQ;YACrC,MAAM,OAAO,MAAM,QAAQ,EAAE,QAAQ;YACrC,MAAM,aAAa,MAAM,UAAU,EAAE,QAAQ;YAE7C,OAAO;gBACH,OAAO,GAAG,KAAK,IAAI,EAAE,KAAK,yCAAyC,CAAC;gBACpE,aAAa,CAAC,iFAAiF,EAAE,KAAK,IAAI,EAAE,KAAK,IAAI,EAAE,WAAW,CAAC,CAAC;gBACpI,WAAW;oBACP,OAAO,GAAG,KAAK,IAAI,EAAE,KAAK,sBAAsB,CAAC;oBACjD,aAAa,CAAC,4CAA4C,CAAC;oBAC3D,QAAQ;wBAAC;qBAAgB,CAAC,+CAA+C;gBAC7E;YACJ;QACJ;IACJ,EAAE,OAAO,GAAG;QACR,QAAQ,KAAK,CAAC,wCAAwC;IAC1D;IAEA,OAAO;QACH,OAAO;QACP,aAAa;IACjB;AACJ;AAGe,eAAe,mBAAmB,EAAE,MAAM,EAAa;IAClE,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,MAAM;IAEjC,2DAA2D;IAC3D,MAAM,IAAI,MAAM,WAAW;IAC3B,MAAM,cACF,MAAM,QAAQ,eACV,MAAM,QAAQ,aACV,MAAM,QAAQ,eACV,MAAM,QAAQ,sBACV,MAAM,WAAW,eAAe;IAEpD,qBAAO,qPAAC,wJAAa;QAAC,OAAO;QAAa,SAAS;;;;;;AACvD"}}]
}