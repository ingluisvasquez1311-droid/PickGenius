{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Daniel/PickGenius/web/app/api/proxy/sportsdata/%5B...path%5D/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nexport const dynamic = 'force-dynamic';\r\n\r\nconst BASE_URL = 'https://api.sofascore.com/api/v1';\r\n\r\nexport async function GET(\r\n    request: NextRequest,\r\n    { params }: { params: Promise<{ path: string[] }> }\r\n) {\r\n    try {\r\n        const { path: pathArray } = await params;\r\n        const path = pathArray.join('/');\r\n        const query = request.nextUrl.search;\r\n\r\n        // üöÄ PUERTA TRASERA: Redirigimos al Bridge para usar tu IP Real\r\n        const BRIDGE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001';\r\n        const targetUrl = `${BRIDGE_URL}/api/proxy/sportsdata/${path}${query}`;\r\n\r\n        console.log(`üîå [Proxy Bridge] Routing through Home-IP: ${targetUrl}`);\r\n\r\n        // Fetch through the bridge (Your home PC)\r\n        const response = await fetch(targetUrl, {\r\n            headers: {\r\n                'ngrok-skip-browser-warning': 'true',\r\n                'bypass-tunnel-reminder': 'true'\r\n            }\r\n        });\r\n\r\n        const data = await response.json();\r\n\r\n        // Determinar cache seg√∫n el tipo de datos\r\n        const isLive = path.includes('live');\r\n        const cacheSeconds = isLive ? 30 : 600; // 30s para vivo, 10 min para programados/finalizados\r\n\r\n        return NextResponse.json(data, {\r\n            headers: {\r\n                'Cache-Control': `public, s-maxage=${cacheSeconds}, stale-while-revalidate=${cacheSeconds / 2}`\r\n            }\r\n        });\r\n\r\n    } catch (error: any) {\r\n        console.error('‚ùå [Proxy Error]:', error.message);\r\n\r\n        return NextResponse.json(\r\n            {\r\n                success: false,\r\n                error: 'Failed to fetch data',\r\n                details: error.message\r\n            },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}"],"names":[],"mappings":";;;;;;AAAA;;AACO,MAAM,UAAU;AAEvB,MAAM,WAAW;AAEV,eAAe,IAClB,OAAoB,EACpB,EAAE,MAAM,EAA2C;IAEnD,IAAI;QACA,MAAM,EAAE,MAAM,SAAS,EAAE,GAAG,MAAM;QAClC,MAAM,OAAO,UAAU,IAAI,CAAC;QAC5B,MAAM,QAAQ,QAAQ,OAAO,CAAC,MAAM;QAEpC,gEAAgE;QAChE,MAAM,aAAa,6DAAmC;QACtD,MAAM,YAAY,GAAG,WAAW,sBAAsB,EAAE,OAAO,OAAO;QAEtE,QAAQ,GAAG,CAAC,CAAC,2CAA2C,EAAE,WAAW;QAErE,0CAA0C;QAC1C,MAAM,WAAW,MAAM,MAAM,WAAW;YACpC,SAAS;gBACL,8BAA8B;gBAC9B,0BAA0B;YAC9B;QACJ;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,0CAA0C;QAC1C,MAAM,SAAS,KAAK,QAAQ,CAAC;QAC7B,MAAM,eAAe,SAAS,KAAK,KAAK,qDAAqD;QAE7F,OAAO,uJAAY,CAAC,IAAI,CAAC,MAAM;YAC3B,SAAS;gBACL,iBAAiB,CAAC,iBAAiB,EAAE,aAAa,yBAAyB,EAAE,eAAe,GAAG;YACnG;QACJ;IAEJ,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,oBAAoB,MAAM,OAAO;QAE/C,OAAO,uJAAY,CAAC,IAAI,CACpB;YACI,SAAS;YACT,OAAO;YACP,SAAS,MAAM,OAAO;QAC1B,GACA;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}